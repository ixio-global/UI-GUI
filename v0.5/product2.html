<!DOCTYPE html>
<!-- saved from url=(0254)file:///C:/Users/speciallon73/Downloads/SaaS_Admin/(%EA%B3%B5%EC%9C%A0)newnewnavy%EB%B0%B1%EC%97%85_%EC%95%88%ED%8B%B08_1125_%EC%83%81%ED%92%88%EA%B8%B0%EC%A4%80%EC%A0%95%EB%B3%B4(RE)_5%EC%B0%A8_%ED%94%BC%EA%B7%B8%EB%A7%88%EC%9E%91%EC%97%85%EC%9A%A9.html -->
<html lang="ko">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>ixi-O O&amp;M â€“ ìƒí’ˆ ê¸°ì¤€ ì •ë³´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    /* =========================
       Color Design Tokens
    ========================= */
    :root {
      /* Base */
      --bg-body: #f8fafc;
      /* Slate 50 */
      --text-main: #0f172a;
      /* Slate 900 */
      --text-sub: #334155;
      /* Slate 700 */
      --text-muted: #64748b;
      /* Slate 500 */
      --text-light: #94a3b8;
      /* Slate 400 */

      /* Brand / Primary (Modern Navy - Deep & Saturated) */
      --brand-grad-from: #172554;
      /* Blue 950 (Deepest Navy) */
      --brand-grad-to: #1e40af;
      /* Blue 800 (Rich Navy) */
      --brand-main: #1e40af;
      /* Blue 800 */
      --brand-main-dark: #1e3a8a;
      /* Blue 900 */
      --brand-main-deep: #172554;
      /* Blue 950 */

      /* Surface / Border */
      --surface: #ffffff;
      --surface-soft: #f1f5f9;
      /* Slate 100 */
      --surface-softer: #f8fafc;
      /* Slate 50 */
      --border-soft: #e2e8f0;
      /* Slate 200 */
      --border-input: #cbd5e1;
      /* Slate 300 */

      /* Sidebar / Menu */
      --sidebar-bg: #ffffff;
      --sidebar-title: #64748b;
      --menu-text: #334155;
      --submenu-dot: #cbd5e1;

      /* Accents */
      --accent-chip-bg: #eff6ff;
      /* Blue 50 */
      --accent-chip-bg-strong: #dbeafe;
      /* Blue 100 */
      --accent-chip-text: #1e40af;
      /* Blue 800 */
      --accent-hover: #f1f5f9;
      /* Slate 100 */
      --accent-row-alt: #f8fafc;
      --accent-link: #1d4ed8;
      /* Blue 700 */

      /* Buttons */
      --btn-primary-bg: #1e40af;
      /* Blue 800 (Navy) */
      --btn-primary-bg-hover: #1e3a8a;
      /* Blue 900 (Darker) */
      --btn-danger-border: #fca5a5;
      --btn-danger-text: #dc2626;
      --btn-danger-bg-hover: #fef2f2;

      /* Table / Pagination */
      --table-head-bg: #f8fafc;

      /* Stub */
      --stub-border: #e2e8f0;

      /* Selected Row */
      --row-selected-bg: #eff6ff;
      /* Blue 50 */

      /* Snapshot Banner */
      --banner-bg: #fff7ed;
      --banner-border: #fed7aa;
      --banner-text: #9a3412;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", system-ui, sans-serif;
      background: var(--bg-body);
      color: var(--text-main);
    }

    input[type="checkbox"],
    input[type="radio"] {
      accent-color: var(--brand-main);
    }

    /* =========================
       í—¤ë” (L1)
    ========================= */
    .header {
      position: fixed;
      inset: 0 0 auto 0;
      height: 60px;
      padding: 0 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(90deg, var(--brand-grad-from), var(--brand-grad-to));
      color: #ffffff;
      z-index: 20;
      box-shadow: 0 4px 12px rgba(23, 37, 84, 0.4);
      /* Deep Navy Shadow */
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 80px;
    }

    .logo {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.04em;
    }

    .top-nav {
      display: flex;
      gap: 40px;
      font-size: 15px;
    }

    .top-nav-item {
      padding: 6px 10px;
      border-radius: 999px;
      cursor: pointer;
      opacity: 0.9;
      white-space: nowrap;
    }

    .top-nav-item:hover {
      background: rgba(255, 255, 255, 0.18);
      opacity: 1;
    }

    .top-nav-item.active {
      background: #ffffff;
      color: var(--brand-main-deep);
      font-weight: 600;
      opacity: 1;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
    }

    .avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.95);
      color: var(--brand-main);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
    }

    /* =========================
       ë ˆì´ì•„ì›ƒ
    ========================= */
    .layout {
      display: flex;
      margin-top: 60px;
      min-height: calc(100vh - 60px);
    }

    /* =========================
       ì‚¬ì´ë“œë°” (L2 / L3)
    ========================= */
    .sidebar {
      width: 260px;
      background: var(--sidebar-bg);
      border-right: 1px solid var(--border-soft);
      padding: 24px 16px;
    }

    .sidebar-section-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--sidebar-title);
      margin-bottom: 12px;
    }

    .menu-list {
      list-style: none;
      padding: 0;
      margin: 2;
      display: flex;
      flex-direction: column;
      gap: 8px;
      font-size: 14px;
    }

    .menu-item {
      border-radius: 10px;
      color: var(--menu-text);
    }

    .menu-main {
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      border-radius: 10px;
    }

    .menu-main:hover {
      background: var(--accent-hover);
    }

    .menu-item.active>.menu-main {
      background: var(--brand-main);
      color: #ffffff;
      font-weight: 600;
    }

    .menu-label {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .menu-icon {
      width: 20px;
      height: 20px;
      border-radius: 6px;
      background: var(--accent-chip-bg);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--brand-main);
    }

    .menu-item.active .menu-icon {
      background: rgba(255, 255, 255, 0.22);
      color: #ffffff;
    }

    .menu-arrow {
      font-size: 12px;
      transition: transform 0.15s ease-out;
    }

    .menu-item.open .menu-arrow {
      transform: rotate(90deg);
    }

    .submenu-list {
      list-style: none;
      padding: 0;
      margin: 4px 0 4px 32px;
      display: none;
    }

    .menu-item.open .submenu-list {
      display: block;
    }

    .submenu-item {
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 13px;
      color: var(--text-sub);
      cursor: pointer;
      position: relative;
    }

    .submenu-item::before {
      content: "";
      position: absolute;
      left: -10px;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 3px;
      border-radius: 999px;
      background: var(--submenu-dot);
    }

    .submenu-item:hover {
      background: var(--accent-hover);
    }

    .submenu-item.active {
      background: var(--accent-chip-bg-strong);
      color: var(--brand-main-dark);
      font-weight: 600;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .submenu-item.active::before {
      background: var(--brand-main);
    }

    /* =========================
       ë©”ì¸ ì»¨í…ì¸  ê³µí†µ
    ========================= */
    .main {
      flex: 1;
      padding: 24px 32px 32px;
      overflow: auto;
    }

    .breadcrumb {
      font-size: 14px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 10px;
    }

    .breadcrumb span.current {
      color: var(--text-main);
      font-weight: 600;
    }

    .page-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 18px;
      color: var(--text-main);
    }

    /* =========================
       ê³µí†µ ì¹´ë“œ / ë²„íŠ¼ / ì¸í’‹
    ========================= */
    .card {
      background: var(--surface);
      border-radius: 14px;
      border: 1px solid var(--border-soft);
      padding: 14px 16px 16px;
      margin-bottom: 12px;
      box-shadow: 0 6px 18px rgba(148, 163, 184, 0.18);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 4px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
      margin: 0;
      color: var(--text-main);
    }

    .section-desc {
      margin: 4px 0 0 0;
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .section-badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-chip-bg);
      color: var(--accent-chip-text);
    }

    .section-body {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
    }

    .btn-primary {
      padding: 8px 18px;
      border-radius: 10px;
      border: none;
      background: var(--btn-primary-bg);
      color: #ffffff;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn-primary:hover {
      background: var(--btn-primary-bg-hover);
    }

    .btn-secondary {
      padding: 8px 14px;
      border-radius: 10px;
      border: 1px solid var(--border-soft);
      background: #ffffff;
      color: var(--text-sub);
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn-secondary:hover {
      background: var(--surface-soft);
    }

    .btn-ghost {
      padding: 6px 10px;
      border-radius: 8px;
      border: none;
      background: transparent;
      color: var(--text-sub);
      font-size: 12px;
      cursor: pointer;
    }

    .btn-ghost:hover {
      background: #f3f4ff;
    }

    .btn-danger {
      padding: 8px 14px;
      border-radius: 10px;
      border: 1px solid var(--btn-danger-border);
      background: #ffffff;
      color: var(--btn-danger-text);
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .btn-danger:hover {
      background: var(--btn-danger-bg-hover);
    }

    .btn-group-right {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 12px;
    }

    .field-input,
    .field-select,
    .field-textarea {
      border-radius: 10px;
      border: 1px solid var(--border-input);
      background: #fafafc;
      font-size: 13px;
      padding: 8px 10px;
      outline: none;
      color: var(--text-main);
      width: 100%;
    }

    /* Width Utilities */
    .w-full {
      width: 100%;
    }

    .w-xs {
      max-width: 120px;
    }

    .w-sm {
      max-width: 200px;
    }

    .w-md {
      max-width: 320px;
    }

    .w-lg {
      max-width: 480px;
    }

    .w-xl {
      max-width: 640px;
    }


    .field-textarea {
      min-height: 90px;
      resize: vertical;
      line-height: 1.5;
    }

    .field-input:focus,
    .field-select:focus,
    .field-textarea:focus {
      border-color: var(--brand-main);
      box-shadow: 0 0 0 1px rgba(30, 64, 175, 0.18);
      background: #ffffff;
    }

    .field-note {
      font-size: 11px;
      color: var(--text-muted);
    }

    .form-grid-2col {
      display: grid;
      grid-template-columns: 140px minmax(0, 1fr);
      column-gap: 24px;
      row-gap: 8px;
      font-size: 13px;
    }

    .form-label {
      padding-top: 6px;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-sub);
    }

    .form-field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      font-size: 13px;
    }

    .inline-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    /* =========================
       ìƒë‹¨ íƒ­ (ê¸°ì¤€ì •ë³´ ë“±ë¡ / ì¡°íšŒÂ·ë³€ê²½)
    ========================= */
    .page-tabs {
      display: inline-flex;
      gap: 6px;
      padding: 4px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 6px 18px rgba(148, 163, 184, 0.25);
      margin-bottom: 16px;
    }

    .page-tab {
      border-radius: 999px;
      border: none;
      padding: 6px 18px;
      font-size: 13px;
      cursor: pointer;
      background: transparent;
      color: var(--text-sub);
    }

    .page-tab.active {
      background: #ffffff;
      color: var(--brand-main-dark);
      font-weight: 600;
      box-shadow: 0 0 0 1px rgba(30, 64, 175, 0.25);
    }

    .content-tab-panel {
      display: none;
      animation: fadeIn 0.16s ease-out;
    }

    .content-tab-panel.active {
      display: block;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(4px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* =========================
       ë“±ë¡ íƒ­ â€“ í”„ë¡œì„¸ìŠ¤ ìŠ¤í… UI (ê³„ì¸µ êµ¬ì¡° ì‹œê°í™”)
    ========================= */
    .process-steps {
      display: flex;
      gap: 4px;
      margin-bottom: 8px;
    }

    .process-step {
      flex: 1;
      position: relative;
      background: var(--surface);
      border: 1px solid var(--border-soft);
      padding: 10px 10px 10px 24px;
      /* Left padding for arrow shape */
      font-size: 13px;
      color: var(--text-sub);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 500;
      clip-path: polygon(0% 0%, 92% 0%, 100% 50%, 92% 100%, 0% 100%, 8% 50%);
      margin-right: -14px;
      /* Overlap for continuous look */
      z-index: 1;
      transition: all 0.2s;
    }

    /* First step needs flat left edge */
    .process-step:first-child {
      clip-path: polygon(0% 0%, 92% 0%, 100% 50%, 92% 100%, 0% 100%);
      padding-left: 16px;
    }

    /* Last step needs flat right edge */
    .process-step:last-child {
      clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%, 8% 50%);
      margin-right: 0;
      padding-right: 16px;
    }

    .process-step:hover {
      background: var(--surface-soft);
      z-index: 2;
    }

    .process-step.active {
      background: var(--brand-main);
      color: #ffffff;
      border-color: var(--brand-main);
      z-index: 10;
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
    }

    .step-number {
      font-size: 10px;
      opacity: 0.8;
      margin-right: 6px;
      font-weight: 700;
      text-transform: uppercase;
    }

    /* =========================
       ë“±ë¡ íƒ­ â€“ ë“±ë¡ ëŒ€ìƒ ì„ íƒ / íƒ€ì… ì¹©
    ========================= */
    .type-groups {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      /* Give more space to hierarchy steps */
      gap: 24px;
    }

    .type-group-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--text-sub);
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .type-chip {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: var(--accent-chip-bg);
      font-size: 12px;
    }

    .view-section {
      display: none;
      /* Default hidden */
    }

    .view-section.active {
      display: block;
      animation: fadeIn 0.3s ease-out;
    }

    /* =========================
       ë“±ë¡ íƒ­ â€“ ì •ì±… ì¹´ë“œ UI (ê³¼ê¸ˆ/í• ì¸ ìš°ì¸¡ ì˜ì—­)
    ========================= */
    .policy-cards {
      display: flex;
      gap: 12px;
      margin-bottom: 8px;
    }

    .policy-card {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 16px;
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: var(--surface);
      color: var(--text-sub);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 42px;
      /* Sync height with process steps */
    }

    .policy-card:hover {
      background: var(--surface-soft);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .policy-card.active {
      background: var(--brand-main);
      /* Modern Navy brand color */
      border-color: var(--brand-main);
      color: #ffffff;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
    }

    .policy-card-icon {
      font-size: 16px;
    }

    /* =========================
               ì´ë¯¸ì§€/ì•„ì´ì½˜ ì—…ë¡œë“œ UI (New)
            ========================= */
    .upload-icon-box {
      width: 64px;
      height: 64px;
      border: 1px dashed #d1d5db;
      border-radius: 8px;
      background: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #9ca3af;
      transition: all 0.2s;
    }

    .upload-icon-box:hover {
      border-color: #6366f1;
      color: #6366f1;
      background: #eef2ff;
    }

    .upload-dropzone {
      border: 1px dashed #d1d5db;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      background: #f9fafb;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }

    .upload-dropzone:hover {
      border-color: #6366f1;
      background: #eef2ff;
    }

    /* Preview States */
    .preview-container {
      position: relative;
      display: inline-block;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
      background: #fff;
    }

    .preview-container img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .btn-remove-image {
      position: absolute;
      top: 4px;
      right: 4px;
      width: 24px;
      height: 24px;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 14px;
      border: none;
      transition: background 0.2s;
    }

    .btn-remove-image:hover {
      background: #ef4444;
    }

    /* =========================
       ë“±ë¡ íƒ­ â€“ ì—…ë¡œë“œ/ì´ë¯¸ì§€ìš©
    ========================= */
    .upload-dropzone {
      border-radius: 12px;
      border: 1px dashed var(--border-soft);
      padding: 12px 12px;
      background: var(--surface-softer);
      font-size: 12px;
      color: var(--text-sub);
    }

    /* =========================
       í• ì¸ ì†ì„± ê·¸ë£¹ ë°•ìŠ¤ (Gray Box)
    ========================= */
    .gray-box {
      background: #f8fafc;
      border: 1px solid var(--border-soft);
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
    }

    .gray-box .form-grid-2col {
      /* Remove default grid spacing inside box for tighter control if needed, 
         but keeping it consistent is fine. Adjust gap slightly. */
      column-gap: 20px;
      row-gap: 12px;
    }

    /* í†µí•©ëœ ì¸í’‹ ë¼ì¸ ìŠ¤íƒ€ì¼ */
    .integrated-input-row {
      display: flex;
      align-items: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .integrated-divider {
      width: 1px;
      height: 14px;
      background: var(--border-soft);
      display: inline-block;
    }

    /* =========================
       ì¡°íšŒ/ë³€ê²½ íƒ­ â€“ ê¸°ì¤€ì •ë³´ ëª©ë¡
    ========================= */
    .table-wrap {
      border-radius: 14px;
      border: 1px solid var(--border-soft);
      overflow: hidden;
      background: var(--surface);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    thead {
      background: var(--table-head-bg);
    }

    th,
    td {
      padding: 8px 14px;
      text-align: left;
      border-bottom: 1px solid var(--border-soft);
      white-space: nowrap;
    }

    th {
      font-weight: 600;
      color: var(--text-sub);
      font-size: 12px;
    }

    tbody tr:nth-child(even) {
      background: var(--accent-row-alt);
    }

    tbody tr:hover {
      background: var(--accent-hover);
      cursor: pointer;
    }

    tbody tr.selected {
      background: var(--row-selected-bg);
    }

    .name-link {
      color: var(--accent-link);
      text-decoration: underline;
      text-decoration-thickness: 0.06em;
      text-underline-offset: 2px;
      cursor: pointer;
    }

    .help-text {
      margin-top: 6px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .snapshot-banner {
      background: var(--banner-bg);
      border: 1px solid var(--banner-border);
      color: var(--banner-text);
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .snapshot-banner strong {
      font-weight: 600;
    }

    /* =========================
       ì¡°íšŒ/ë³€ê²½ íƒ­ â€“ ìƒì„¸ ì •ë³´ (Aì•ˆ + ë²„ì „ ì •ì±…)
    ========================= */
    .detail-layout {
      display: flex;
      gap: 20px;
      align-items: flex-start;
      margin-top: 4px;
    }

    .detail-visual {
      flex: 0 0 280px;
    }

    .feature-image {
      width: 100%;
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: #e5e7eb;
      object-fit: cover;
      display: block;
    }

    .detail-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .detail-title {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 2px 0;
    }

    .detail-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 16px;
      font-size: 12px;
      color: var(--text-sub);
    }

    .meta-label {
      color: var(--text-muted);
      margin-right: 2px;
    }

    .detail-section-title {
      font-size: 13px;
      font-weight: 600;
      margin: 8px 0 4px 0;
      color: var(--text-sub);
    }

    .detail-list {
      margin: 0;
      padding-left: 18px;
      font-size: 13px;
      color: var(--text-main);
    }

    /* =========================
       Stub ì¹´ë“œ
    ========================= */
    .stub-card {
      background: var(--surface);
      border-radius: 14px;
      border: 1px dashed var(--stub-border);
      padding: 26px 22px;
      text-align: left;
      color: var(--text-muted);
      font-size: 14px;
    }

    .stub-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-main);
      margin-bottom: 6px;
    }

    /* ìƒì„¸ ì¹´ë“œ ê°„ ê°„ê²© */
    .detail-block+.detail-block {
      margin-top: 10px;
    }

    @media (max-width: 960px) {
      .layout {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--border-soft);
      }

      .main {
        padding: 18px 14px 24px;
      }

      .type-groups {
        grid-template-columns: 1fr;
      }

      .detail-layout {
        flex-direction: column;
      }

      .detail-visual {
        width: 100%;
        max-width: 100%;
      }

      .form-grid-2col {
        grid-template-columns: 1fr;
      }
    }

    /* ìƒë‹¨ í—¤ë” íƒ­ / ì‚¬ì´ë“œë°”: ì»¤ì„œ+í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
    .top-nav-item,
    .top-nav-item *,
    .menu-item,
    .menu-main,
    .menu-label,
    .submenu-item,
    .submenu-item::before,
    .menu-icon {
      cursor: pointer !important;
      user-select: none;
    }

    /* =========================
           ëª¨ë‹¬ (Modal) ìŠ¤íƒ€ì¼
        ========================= */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(2px);
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .modal-overlay.open {
      display: flex;
      opacity: 1;
    }

    .modal-container {
      width: 100%;
      max-width: 900px;
      max-height: 90vh;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transform: scale(0.95);
      transition: transform 0.2s ease;
    }

    .modal-overlay.open .modal-container {
      transform: scale(1);
    }

    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border-soft);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-main);
    }

    .modal-close-btn {
      background: transparent;
      border: none;
      font-size: 24px;
      color: var(--text-muted);
      cursor: pointer;
      line-height: 1;
    }

    .modal-body {
      padding: 24px;
      overflow-y: auto;
      background: var(--bg-body);
      /* í¼ ë°°ê²½ìƒ‰ê³¼ ë§ì¶¤ */
    }
  </style>
</head>

<body>
  <!-- í—¤ë” -->
  <header class="header">
    <div class="header-left">
      <div class="logo">ixi-O O&amp;M</div>
      <nav class="top-nav">
        <div class="top-nav-item active" data-top-label="ìƒí’ˆ ìš´ì˜">ìƒí’ˆ ìš´ì˜</div>
        <div class="top-nav-item" data-top-label="ì„œë¹„ìŠ¤ ìš´ì˜">ì„œë¹„ìŠ¤ ìš´ì˜</div>
        <div class="top-nav-item" data-top-label="ì„œë¹„ìŠ¤ ì •ì‚°">ì„œë¹„ìŠ¤ ì •ì‚°</div>
        <div class="top-nav-item" data-top-label="ì¼ë°˜">ì¼ë°˜</div>
      </nav>
    </div>
    <div class="header-right">
      <div class="avatar">A</div>
      <span>ê´€ë¦¬ì</span>
    </div>
  </header>

  <!-- ë ˆì´ì•„ì›ƒ -->
  <div class="layout">
    <!-- ì‚¬ì´ë“œë°” -->
    <aside class="sidebar">
      <div class="sidebar-section-title" id="sidebar-title">ìƒí’ˆ ìš´ì˜</div>
      <ul class="menu-list" id="sidebar-menu">
        <li class="menu-item active open" data-l2="ìƒí’ˆ ê´€ë¦¬">
          <div class="menu-main">
            <div class="menu-label"><span class="menu-icon">ğŸ“‚</span><span>ìƒí’ˆ ê´€ë¦¬</span></div><span
              class="menu-arrow">â€º</span>
          </div>
          <ul class="submenu-list">
            <li class="submenu-item active" data-l3="ìƒí’ˆ ê¸°ì¤€ ì •ë³´">ìƒí’ˆ ê¸°ì¤€ ì •ë³´</li>
          </ul>
        </li>
        <li class="menu-item" data-l2="ê³ ê°ì‚¬ ê´€ë¦¬">
          <div class="menu-main">
            <div class="menu-label"><span class="menu-icon">ğŸ“‚</span><span>ê³ ê°ì‚¬ ê´€ë¦¬</span></div><span
              class="menu-arrow">â€º</span>
          </div>
          <ul class="submenu-list">
            <li class="submenu-item" data-l3="ê³ ê°ì‚¬ ì •ë³´">ê³ ê°ì‚¬ ì •ë³´</li>
            <li class="submenu-item" data-l3="ê³„ì•½ ê´€ë¦¬">ê³„ì•½ ê´€ë¦¬</li>
          </ul>
        </li>
        <li class="menu-item" data-l2="ëŒ€ì‹œë³´ë“œ">
          <div class="menu-main">
            <div class="menu-label"><span class="menu-icon">ğŸ“‚</span><span>ëŒ€ì‹œë³´ë“œ</span></div><span
              class="menu-arrow">â€º</span>
          </div>
          <ul class="submenu-list">
            <li class="submenu-item" data-l3="ì‚¬ì—… ì‹¤ì  ê´€ë¦¬">ì‚¬ì—… ì‹¤ì  ê´€ë¦¬</li>
          </ul>
        </li>
      </ul>
    </aside>

    <!-- ë©”ì¸ -->
    <main class="main">
      <div class="breadcrumb" id="breadcrumb">
        <span>ìƒí’ˆ ìš´ì˜</span>
        <span>â€º</span>
        <span>ìƒí’ˆ ê´€ë¦¬</span>
        <span>â€º</span><span class="current">ìƒí’ˆ ê¸°ì¤€ ì •ë³´</span>
      </div>
      <div id="page-inner">
        <!-- ë©”ì¸ View: ì¡°íšŒ ëª©ë¡ + ìƒì„¸ -->
        <div id="view-list" class="view-section active">
          <div class="page-title">ìƒí’ˆ ê¸°ì¤€ ì •ë³´</div>

          <section class="card">
            <div class="section-header">
              <div>
                <h2 class="section-title">ê¸°ì¤€ì •ë³´ ëª©ë¡ (Snapshot)</h2>
                <p class="section-desc">
                  ì„ íƒí•œ ê¸°ì¤€ì¼ì ê¸°ì¤€ìœ¼ë¡œ ìœ íš¨í•œ ìƒí’ˆ/ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥/ê³¼ê¸ˆìš”ì†Œ/í• ì¸ìš”ì†Œë¥¼ í•œ ë²ˆì— ì¡°íšŒí•©ë‹ˆë‹¤.
                </p>
              </div>
              <div class="btn-group-right" style="margin-top:0;">
                <div class="btn-group-right" style="margin-top:0; gap:8px;">
                  <button class="btn-primary" id="btn-go-register-page" style="height:36px;">
                    + ì‹ ê·œ ë“±ë¡ (í˜ì´ì§€)
                  </button>
                  <button class="btn-primary" id="btn-go-register-modal" style="height:36px; background: #4f46e5;">
                    + ì‹ ê·œ ë“±ë¡ (ëª¨ë‹¬)
                  </button>
                </div>
              </div>
            </div>
            <div class="section-body">
              <div class="snapshot-banner">
                <span>ğŸ“… <strong>ìŠ¤ëƒ…ìƒ· ì¡°íšŒ ëª¨ë“œ:</strong> í˜„ì¬ ì„ íƒëœ ì¼ì(<span id="snapshot-date-display">2025-12-09</span>) ê¸°ì¤€ìœ¼ë¡œ
                  ìœ íš¨í•œ ê¸°ì¤€ì •ë³´ë§Œ í‘œì‹œí•©ë‹ˆë‹¤. ê³¼ê±° ì´ë ¥ì„ ë³´ë ¤ë©´ ê¸°ì¤€ì¼ìë¥¼ ë³€ê²½í•˜ì„¸ìš”.</span>
              </div>

              <div class="inline-row" style="margin-bottom:4px; gap:8px;">
                <div class="form-field-group" style="max-width:200px;">
                  <input type="date" class="field-input" id="lookup-date" value="2025-12-09">
                </div>
                <div class="form-field-group" style="max-width:140px;">
                  <select class="field-select" id="filter-type">
                    <option value="ALL">ì „ì²´ ìœ í˜•</option>
                    <option value="ìƒí’ˆ">ìƒí’ˆ</option>
                    <option value="ê¸°ëŠ¥ê·¸ë£¹">ê¸°ëŠ¥ê·¸ë£¹</option>
                    <option value="ê¸°ëŠ¥">ê¸°ëŠ¥</option>
                    <option value="ê³¼ê¸ˆìš”ì†Œ">ê³¼ê¸ˆìš”ì†Œ</option>
                    <option value="í• ì¸ìš”ì†Œ">í• ì¸ìš”ì†Œ</option>
                  </select>
                </div>
                <button class="btn-secondary" type="button" id="btn-lookup">ì¡°íšŒ</button>
              </div>

              <div class="table-wrap">
                <table>
                  <thead>
                    <tr>
                      <th>ìœ í˜•</th>
                      <th>ì½”ë“œ</th>
                      <th>ëª…ì¹­</th>
                      <th>ìµœì´ˆ ìƒì„±ì¼ì</th>
                      <th>í˜„ ìƒíƒœ</th>
                      <th style="width:60px;">ì´ë ¥</th>
                    </tr>
                  </thead>
                  <tbody id="reference-tbody">
                    <tr data-code="PKG-ixi_O-BASIC" class="selected"
                      style="background:var(--accent-chip-bg); border-left: 3px solid var(--brand-main);">
                      <td style="font-weight:700; color:var(--brand-main);">ìƒí’ˆ</td>
                      <td>PKG-ixi_O-BASIC</td>
                      <td><span class="name-link" style="font-weight:600;">ixi-O ê¸°ë³¸ íŒ¨í‚¤ì§€</span></td>
                      <td>2025-01-01</td>
                    </tr>

                    <tr data-code="FG-CALL-EASE" class="" style="">
                      <td style="">ê¸°ëŠ¥ê·¸ë£¹</td>
                      <td>FG-CALL-EASE</td>
                      <td><span class="name-link" style="">í†µí™” í¸ì˜</span></td>
                      <td>2024-12-01</td>
                    </tr>

                    <tr data-code="FT-SEE-CALL" class="" style="">
                      <td style="">ê¸°ëŠ¥</td>
                      <td>FT-SEE-CALL</td>
                      <td><span class="name-link" style="">ë³´ì´ëŠ” ì „í™”</span></td>
                      <td>2024-11-15</td>
                    </tr>

                    <tr data-code="BG-ixi_O-01" class="" style="">
                      <td style="">ê³¼ê¸ˆìš”ì†Œ</td>
                      <td>BG-ixi_O-01</td>
                      <td><span class="name-link" style="">ixi-O ì¸ë‹¹ ê³¼ê¸ˆ(í‘œì¤€)</span></td>
                      <td>2025-01-01</td>
                    </tr>

                    <tr data-code="DC-ixi_O-LAUNCH" class="" style="">
                      <td style="">í• ì¸ìš”ì†Œ</td>
                      <td>DC-ixi_O-LAUNCH</td>
                      <td><span class="name-link" style="">ixi-O ëŸ°ì¹­ 3ê°œì›” 50% í• ì¸</span></td>
                      <td>2025-01-15</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <!-- Pagination UI (PRD: í˜ì´ì§• ì§€ì›) -->
              <div class="pagination-wrap"
                style="display:flex; justify-content:space-between; align-items:center; margin-top:12px; padding:8px 0;">
                <div style="font-size:12px; color:var(--text-muted);">
                  ì´ <strong id="total-count">0</strong>ê±´ ì¤‘ <strong>1-10</strong>ê±´ í‘œì‹œ
                </div>
                <div style="display:flex; gap:4px;">
                  <button class="btn-ghost" disabled>Â« ì²˜ìŒ</button>
                  <button class="btn-ghost" disabled>â€¹ ì´ì „</button>
                  <button class="btn-ghost"
                    style="background:var(--brand-main); color:#fff; font-weight:600;">1</button>
                  <button class="btn-ghost">2</button>
                  <button class="btn-ghost">3</button>
                  <button class="btn-ghost">ë‹¤ìŒ â€º</button>
                  <button class="btn-ghost">ë§ˆì§€ë§‰ Â»</button>
                </div>
              </div>

              <p class="help-text">
                â€» í–‰ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ê¸°ì¤€ì •ë³´ì˜ ìƒì„¸/ë³€ê²½ í™”ë©´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ì´ë ¥ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë³€ê²½ ì´ë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
            </div>
          </section>

          <!-- ì´ë ¥ ì¡°íšŒ ëª¨ë‹¬ (PRD 3.3: ê¸°ì¤€ì •ë³´ ì´ë ¥ ë° ìŠ¤ëƒ…ìƒ·) -->
          <div id="history-modal"
            style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:100; align-items:center; justify-content:center;">
            <div
              style="background:#fff; border-radius:16px; max-width:700px; width:90%; max-height:80vh; overflow:auto; box-shadow:0 20px 40px rgba(0,0,0,0.2);">
              <div
                style="padding:20px 24px; border-bottom:1px solid var(--border-soft); display:flex; justify-content:space-between; align-items:center;">
                <h3 style="margin:0; font-size:16px; font-weight:600;">ë³€ê²½ ì´ë ¥ ì¡°íšŒ</h3>
                <button id="close-history-modal"
                  style="border:none; background:none; font-size:20px; cursor:pointer; color:var(--text-muted);">âœ•</button>
              </div>
              <div style="padding:24px;">
                <div style="margin-bottom:16px;">
                  <span style="font-size:13px; color:var(--text-muted);">ì½”ë“œ:</span>
                  <strong id="history-modal-code" style="color:var(--brand-main);"></strong>
                </div>
                <div class="table-wrap">
                  <table>
                    <thead>
                      <tr>
                        <th>ì¼ì</th>
                        <th>ì‘ì—…</th>
                        <th>ë‹´ë‹¹ì</th>
                        <th>ë³€ê²½ë‚´ìš©</th>
                      </tr>
                    </thead>
                    <tbody id="history-tbody"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- 5ê°œ ìƒì„¸ í™”ë©´ì„ ëª¨ë‘ ë‚˜ì—´í•˜ëŠ” ì˜ì—­ -->
          <div id="reference-detail-list">
            <section class="card detail-block" id="detail-PKG-ixi_O-BASIC" style="margin-top:20px;">

              <div class="section-header">
                <div>
                  <h2 class="section-title">ìƒì„¸ ì •ë³´ Â· ë³€ê²½</h2>
                  <p class="section-desc">
                    ì„ íƒí•œ ê¸°ì¤€ì •ë³´([PKG-ixi_O-BASIC])ì˜ ì†ì„±ì„ í™•ì¸í•˜ê³  ë³€ê²½í•©ë‹ˆë‹¤.
                    ì•„ë˜ ë“±ë¡ ì–‘ì‹ì„ í†µí•´ ìˆ˜ì •ëœ ë‚´ìš©ì€ 'ë³€ê²½ ì ìš© ê¸°ì¤€ì¼ì'ë¶€í„° ìœ íš¨í•œ ì‹ ê·œ ë²„ì „ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                  </p>
                </div>
              </div>

              <div class="detail-layout" style="display:block;">
                <!-- Version & Meta Info -->

                <!-- Version Control Panel -->
                <div style="
                    display: flex; 
                    flex-direction: row; 
                    align-items: center; 
                    justify-content: space-between; 
                    gap: 20px; 
                    padding: 24px; 
                    background: #f8fafc; 
                    border: 1px solid #e2e8f0; 
                    border-radius: 12px;
                    margin-bottom: 30px;
                    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
                ">
                  <!-- Left: Current Status -->
                  <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="
                            width: 44px; height: 44px; 
                            background: #eff6ff; 
                            border-radius: 8px; 
                            display: flex; align-items: center; justify-content: center;
                            font-size: 20px;
                        ">ğŸ“…</div>
                    <div>
                      <div style="font-size: 13px; color: #64748b; font-weight: 500; margin-bottom: 4px;">í˜„ì¬ ë²„ì „ ìœ íš¨ê¸°ê°„
                        (Valid Period)</div>
                      <div style="font-size: 16px; font-weight: 700; color: #1e293b; letter-spacing: -0.01em;">
                        2025-01-01 ~ 9999-12-31
                        <span style="
                                    display: inline-block; 
                                    margin-left: 8px; 
                                    padding: 2px 8px; 
                                    background: #dcfce7; 
                                    color: #166534; 
                                    font-size: 11px; 
                                    border-radius: 999px; 
                                    vertical-align: middle;
                                ">Active</span>
                      </div>
                    </div>
                  </div>

                  <!-- Divider -->
                  <div style="width: 1px; height: 40px; background: #cbd5e1;"></div>

                  <!-- Right: Action Area -->
                  <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                    <div style="flex: 1;">
                      <label for="change-effective-date-PKG-ixi_O-BASIC"
                        style="display: block; font-size: 13px; color: var(--brand-main); font-weight: 600; margin-bottom: 4px;">
                        ì‹ ê·œ ë²„ì „ ì‹œì‘ì¼ (Effective Date)
                      </label>
                      <input type="date" id="change-effective-date-PKG-ixi_O-BASIC" class="field-input w-sm"
                        style="height: 38px; border-color: var(--accent-chip-bg-strong);">
                    </div>
                    <div style="padding-top: 20px; display: flex; gap: 8px;"> <!-- align with input box -->
                      <button class="btn-primary" type="button" onclick="handleApplyChange(&#39;PKG-ixi_O-BASIC&#39;)"
                        style="height: 38px; padding: 0 20px; font-weight: 600; box-shadow: 0 2px 4px rgba(30, 64, 175, 0.3);">
                        ë³€ê²½ì‚¬í•­ ì €ì¥ (Version Up)
                      </button>
                      <button type="button" onclick="handleDelete(&#39;PKG-ixi_O-BASIC&#39;)" style="
                                    height: 38px; 
                                    padding: 0 12px; 
                                    font-weight: 600; 
                                    color: #dc2626; 
                                    background: #fef2f2; 
                                    border: 1px solid #fecaca; 
                                    border-radius: 4px;
                                    cursor: pointer;
                                    display: flex; align-items: center; gap: 4px;
                                " onmouseover="this.style.background=&#39;#fee2e2&#39;"
                        onmouseout="this.style.background=&#39;#fef2f2&#39;">
                        <span style="font-size:14px;">ğŸ—‘ï¸</span> ì‚­ì œ
                      </button>
                    </div>
                  </div>
                </div>


                <!-- Embedded Registration Form (The "Continuous Attachment") -->
                <div class="embedded-form-area" style="position:relative;">
                  <div class="section-divider"
                    style="margin:30px 0 10px; border-top:2px dashed var(--accent-chip-bg-strong);"></div>
                  <div class="type-group-title" style="margin-bottom:15px; color:var(--brand-main-dark);">ê¸°ì¤€ì •ë³´ ë“±ë¡ ìƒì„¸
                    (ìƒí’ˆ)</div>

                  <section class="card">
                    <div class="section-header">
                      <div>
                        <h2 class="section-title">ìƒí’ˆ ê¸°ë³¸ ì •ë³´</h2>
                        <p class="section-desc">
                          ê³ ê°ì‚¬ê°€ ì²­ì•½í•˜ëŠ” ë‹¨ìœ„ì¸ ìƒí’ˆì„ ì •ì˜í•©ë‹ˆë‹¤. ìƒí’ˆì—ëŠ” í•˜ë‚˜ ì´ìƒì˜ ê¸°ëŠ¥ê·¸ë£¹ì´ í¬í•¨ë˜ë©°,
                          ê³ ê°ì‚¬ëŠ” ìƒí’ˆ êµ¬ì„± ìì²´ë¥¼ ì„ì˜ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                        </p>
                      </div>
                    </div>
                    <div class="section-body form-grid-2col">
                      <div class="form-label">ìƒí’ˆëª…</div>
                      <div class="form-field-group">
                        <input class="field-input w-lg" type="text" placeholder="ì˜ˆ: ixi-O ê¸°ë³¸ íŒ¨í‚¤ì§€">
                      </div>

                      <div class="form-label">ì„¤ëª…</div>
                      <div class="form-field-group">
                        <textarea class="field-textarea" placeholder="ìƒí’ˆì˜ ì£¼ìš” ëŒ€ìƒ, í¬í•¨ ê¸°ëŠ¥, ìœ ì˜ì‚¬í•­ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                      </div>
                    </div>
                  </section>

                  <section class="card">
                    <div class="section-header">
                      <div>
                        <h2 class="section-title">í•˜ìœ„ ê¸°ëŠ¥ê·¸ë£¹ êµ¬ì„±</h2>
                        <p class="section-desc">
                          ì‚¬ì „ì— ë“±ë¡ëœ ê¸°ëŠ¥ê·¸ë£¹ ì¤‘ ì´ ìƒí’ˆì— í¬í•¨í•  ê·¸ë£¹ì„ ì„ íƒí•©ë‹ˆë‹¤.
                          ë™ì¼ ê¸°ëŠ¥ê·¸ë£¹ì€ ì—¬ëŸ¬ ìƒí’ˆì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                      </div>
                    </div>
                    <div class="section-body">
                      <div class="form-field-group">
                        <div class="field-note">â€» ì•„ë˜ ëª©ë¡ì€ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ ê²€ìƒ‰/í•„í„°/í˜ì´ì§•ì´ ì ìš©ë©ë‹ˆë‹¤.</div>
                        <div class="table-wrap">
                          <table>
                            <thead>
                              <tr>
                                <th style="width:40px;"></th>
                                <th>ì½”ë“œ</th>
                                <th>ê¸°ëŠ¥ê·¸ë£¹ëª…</th>
                                <th>ì„¤ëª…</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td><input type="checkbox" checked=""></td>
                                <td>FG-CALL-EASE</td>
                                <td>í†µí™” í¸ì˜</td>
                                <td>ë³´ì´ëŠ” ì „í™”, í†µí™” ìš”ì•½ ë“± í†µí™” UX í–¥ìƒ ê¸°ëŠ¥ ê·¸ë£¹</td>
                              </tr>
                              <tr>
                                <td><input type="checkbox"></td>
                                <td>FG-SECURE</td>
                                <td>ë³´ì•ˆ</td>
                                <td>ë³´ì´ìŠ¤í”¼ì‹± ê°ì§€, ìŠ¤íŒ¸ ì°¨ë‹¨ ë“± ë³´ì•ˆ ê´€ë ¨ ê¸°ëŠ¥ ê·¸ë£¹</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        <span class="field-note">â€» ê³ ê°ì‚¬ëŠ” ìƒí’ˆ êµ¬ì„±(í¬í•¨ ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥)ì„ ì§ì ‘ ë³€ê²½í•  ìˆ˜ ì—†ìœ¼ë©°, ë‹¹ì‚¬ì—ì„œë§Œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span>
                      </div>
                    </div>

                    <div class="btn-group-right">
                      <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
                      <button class="btn-primary" type="button"
                        onclick="alert(&#39;ìƒí’ˆ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ ì ìš© ì¼ì ì„ íƒ íŒì—…ê³¼ ì—°ë™ë©ë‹ˆë‹¤.&#39;)">ë“±ë¡</button>
                    </div>
                  </section>

                </div>
              </div>

            </section>
          </div>
        </div>

        <!-- ë“±ë¡ View: ì‹ ê·œ ë“±ë¡ í¼ -->
        <div id="view-register" class="view-section">
          <div class="page-title">ê¸°ì¤€ì •ë³´ ë“±ë¡</div>

          <section class="card">
            <div class="section-header">
              <div>
                <h2 class="section-title">ë“±ë¡ ëŒ€ìƒ ì„ íƒ</h2>
                <p class="section-desc">
                  ìƒí’ˆ/ê¸°ëŠ¥/ê¸°ëŠ¥ê·¸ë£¹, ê³¼ê¸ˆ/í• ì¸ ìš”ì†Œë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì—ì„œ ë“±ë¡Â·ê´€ë¦¬í•©ë‹ˆë‹¤.
                  ì„œë¹„ìŠ¤ êµ¬ì„±(ìƒí’ˆ/ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥)ê³¼ ê³¼ê¸ˆÂ·í• ì¸ ì •ì±…(ê³¼ê¸ˆìš”ì†Œ/í• ì¸ìš”ì†Œ)ì„ ì‹œê°ì ìœ¼ë¡œ ë¶„ë¦¬í•´ ì„ íƒí•©ë‹ˆë‹¤.
                </p>
              </div>
              <div class="btn-group-right" style="margin-top:0;">
                <button class="btn-secondary" id="btn-back-list-page" style="height:36px;">
                  ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </button>
              </div>
            </div>
            <div class="section-body">
              <div class="type-groups">
                <div>
                  <div class="type-group-title">ì„œë¹„ìŠ¤ êµ¬ì„± (ë“±ë¡ ìœ í˜• ì„ íƒ)</div>
                  <div class="process-steps" id="chip-group-service">
                    <div class="process-step active" data-type="ê¸°ëŠ¥">
                      <!-- Removed Step Number --> ê¸°ëŠ¥
                    </div>
                    <div class="process-step" data-type="ê¸°ëŠ¥ê·¸ë£¹">
                      ê¸°ëŠ¥ê·¸ë£¹
                    </div>
                    <div class="process-step" data-type="ìƒí’ˆ">
                      ìƒí’ˆ
                    </div>
                  </div>
                </div>
                <div>
                  <div class="type-group-title">ê³¼ê¸ˆ / í• ì¸ ì •ì±… (ëª¨ë“ˆ)</div>
                  <div class="policy-cards" id="chip-group-billing">
                    <div class="policy-card" data-type="ê³¼ê¸ˆìš”ì†Œ">
                      <span class="policy-card-icon">ğŸ’°</span> ê³¼ê¸ˆìš”ì†Œ
                    </div>
                    <div class="policy-card" data-type="í• ì¸ìš”ì†Œ">
                      <span class="policy-card-icon">ğŸ·ï¸</span> í• ì¸ìš”ì†Œ
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <div id="register-tab-inner-page">
            <section class="card">
              <div class="section-header">
                <div>
                  <h2 class="section-title">ê¸°ëŠ¥ ê¸°ë³¸ ì •ë³´</h2>
                  <p class="section-desc">
                    ìµœì¢… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ëŠ” ë‹¨ìœ„ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€ëŠ”
                    ê¸°ì¤€ì •ë³´ ì¡°íšŒÂ·ë³€ê²½ íƒ­ì—ì„œ ê¸°ëŠ¥ ìƒì„¸ í™•ì¸ ì‹œ ìƒë‹¨ì— ë…¸ì¶œë©ë‹ˆë‹¤.
                  </p>
                </div>
              </div>
              <div class="section-body form-grid-2col">
                <div class="form-label">ê¸°ëŠ¥ ì•„ì´ì½˜</div>
                <div class="form-field-group">
                  <input type="file" id="input-feature-icon" hidden="" accept="image/*">
                  <div id="dropzone-feature-icon" class="upload-icon-box" title="ì•„ì´ì½˜ ì—…ë¡œë“œ">
                    <span style="font-size:20px;">+</span>
                  </div>
                  <div id="preview-feature-icon" style="display:none;"></div>
                  <span class="field-note" style="margin-top:6px;">ì•± ë¦¬ìŠ¤íŠ¸ ë° ë©”ë‰´ì— ë…¸ì¶œë˜ëŠ” ì•„ì´ì½˜ (64x64 ê¶Œì¥)</span>
                </div>

                <div class="form-label">ê¸°ëŠ¥ëª…</div>
                <div class="form-field-group">
                  <input class="field-input w-md" type="text" placeholder="ì˜ˆ: ë³´ì´ëŠ” ì „í™”">
                </div>

                <div class="form-label">ì„¤ëª…</div>
                <div class="form-field-group">
                  <textarea class="field-textarea" placeholder="ì‚¬ìš©ìê°€ ì¸ì§€í•˜ëŠ” ê¸°ëŠ¥ ëª©ì ê³¼ ì£¼ìš” ì‚¬ìš© íë¦„ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                </div>

                <div class="form-label">ëŒ€í‘œ ì´ë¯¸ì§€</div>
                <div class="form-field-group">
                  <input type="file" id="input-feature-image" hidden="" accept="image/*">
                  <div id="dropzone-feature-image" class="upload-dropzone">
                    <div style="font-weight:500; margin-bottom:4px;">ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ</div>
                    <div>ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ Drag &amp; Drop í•˜ê±°ë‚˜, í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.</div>
                    <div class="field-note" style="margin-top:4px;">
                      PNG/JPEG, 5MB ì´í•˜ ê¶Œì¥. í†µí™” ì•± ë‚´ ì‹¤ì œ í™”ë©´ê³¼ ìµœëŒ€í•œ ìœ ì‚¬í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                    </div>
                  </div>
                  <div id="preview-feature-image" style="display:none;"></div>
                </div>
              </div>

              <div class="btn-group-right">
                <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
                <button class="btn-primary" type="button" onclick="alert(&#39;ê¸°ëŠ¥ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.&#39;)">ë“±ë¡</button>
              </div>
            </section>
          </div>
        </div>

        <!-- ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ (Hidden by default) -->
        <div class="modal-overlay" id="modal-register">
          <div class="modal-container">
            <div class="modal-header">
              <div class="modal-title">ê¸°ì¤€ì •ë³´ ì‹ ê·œ ë“±ë¡</div>
              <button class="modal-close-btn" id="btn-close-modal">Ã—</button>
            </div>
            <div class="modal-body">
              <!-- ëª¨ë‹¬ ë‚´ë¶€ìš© ì»¨í…ì¸  ì˜ì—­ -->
              <section class="card" style="margin-bottom: 20px;">
                <div class="section-header">
                  <div>
                    <h2 class="section-title">ë“±ë¡ ëŒ€ìƒ ì„ íƒ</h2>
                    <p class="section-desc">
                      ë“±ë¡í•  ê¸°ì¤€ì •ë³´ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”.
                    </p>
                  </div>
                </div>
                <div class="section-body">
                  <div class="type-groups">
                    <div>
                      <div class="type-group-title">ì„œë¹„ìŠ¤ êµ¬ì„± (ë“±ë¡ ìœ í˜• ì„ íƒ)</div>
                      <div class="process-steps" id="chip-group-service-modal">
                        <div class="process-step active" data-type="ê¸°ëŠ¥">ê¸°ëŠ¥</div>
                        <div class="process-step" data-type="ê¸°ëŠ¥ê·¸ë£¹">ê¸°ëŠ¥ê·¸ë£¹</div>
                        <div class="process-step" data-type="ìƒí’ˆ">ìƒí’ˆ</div>
                      </div>
                    </div>
                    <div>
                      <div class="type-group-title">ê³¼ê¸ˆ / í• ì¸ ì •ì±… (ëª¨ë“ˆ)</div>
                      <div class="policy-cards" id="chip-group-billing-modal">
                        <div class="policy-card" data-type="ê³¼ê¸ˆìš”ì†Œ"><span class="policy-card-icon">ğŸ’°</span> ê³¼ê¸ˆìš”ì†Œ</div>
                        <div class="policy-card" data-type="í• ì¸ìš”ì†Œ"><span class="policy-card-icon">ğŸ·ï¸</span> í• ì¸ìš”ì†Œ</div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <div id="register-tab-inner-modal">
                <section class="card">
                  <div class="section-header">
                    <div>
                      <h2 class="section-title">ê¸°ëŠ¥ ê¸°ë³¸ ì •ë³´</h2>
                      <p class="section-desc">
                        ìµœì¢… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ëŠ” ë‹¨ìœ„ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€ëŠ”
                        ê¸°ì¤€ì •ë³´ ì¡°íšŒÂ·ë³€ê²½ íƒ­ì—ì„œ ê¸°ëŠ¥ ìƒì„¸ í™•ì¸ ì‹œ ìƒë‹¨ì— ë…¸ì¶œë©ë‹ˆë‹¤.
                      </p>
                    </div>
                  </div>
                  <div class="section-body form-grid-2col">
                    <div class="form-label">ê¸°ëŠ¥ ì•„ì´ì½˜</div>
                    <div class="form-field-group">
                      <input type="file" id="input-feature-icon" hidden="" accept="image/*">
                      <div id="dropzone-feature-icon" class="upload-icon-box" title="ì•„ì´ì½˜ ì—…ë¡œë“œ">
                        <span style="font-size:20px;">+</span>
                      </div>
                      <div id="preview-feature-icon" style="display:none;"></div>
                      <span class="field-note" style="margin-top:6px;">ì•± ë¦¬ìŠ¤íŠ¸ ë° ë©”ë‰´ì— ë…¸ì¶œë˜ëŠ” ì•„ì´ì½˜ (64x64 ê¶Œì¥)</span>
                    </div>

                    <div class="form-label">ê¸°ëŠ¥ëª…</div>
                    <div class="form-field-group">
                      <input class="field-input w-md" type="text" placeholder="ì˜ˆ: ë³´ì´ëŠ” ì „í™”">
                    </div>

                    <div class="form-label">ì„¤ëª…</div>
                    <div class="form-field-group">
                      <textarea class="field-textarea" placeholder="ì‚¬ìš©ìê°€ ì¸ì§€í•˜ëŠ” ê¸°ëŠ¥ ëª©ì ê³¼ ì£¼ìš” ì‚¬ìš© íë¦„ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                    </div>

                    <div class="form-label">ëŒ€í‘œ ì´ë¯¸ì§€</div>
                    <div class="form-field-group">
                      <input type="file" id="input-feature-image" hidden="" accept="image/*">
                      <div id="dropzone-feature-image" class="upload-dropzone">
                        <div style="font-weight:500; margin-bottom:4px;">ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ</div>
                        <div>ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ Drag &amp; Drop í•˜ê±°ë‚˜, í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.</div>
                        <div class="field-note" style="margin-top:4px;">
                          PNG/JPEG, 5MB ì´í•˜ ê¶Œì¥. í†µí™” ì•± ë‚´ ì‹¤ì œ í™”ë©´ê³¼ ìµœëŒ€í•œ ìœ ì‚¬í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                        </div>
                      </div>
                      <div id="preview-feature-image" style="display:none;"></div>
                    </div>
                  </div>

                  <div class="btn-group-right">
                    <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
                    <button class="btn-primary" type="button" onclick="alert(&#39;ê¸°ëŠ¥ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.&#39;)">ë“±ë¡</button>
                  </div>
                </section>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    /* =========================
       ë©”ë‰´ êµ¬ì¡° ì •ì˜
    ========================= */
    const MENU_STRUCTURE = {
      "ìƒí’ˆ ìš´ì˜": {
        "ìƒí’ˆ ê´€ë¦¬": ["ìƒí’ˆ ê¸°ì¤€ ì •ë³´"],
        "ê³ ê°ì‚¬ ê´€ë¦¬": ["ê³ ê°ì‚¬ ì •ë³´", "ê³„ì•½ ê´€ë¦¬"],
        "ëŒ€ì‹œë³´ë“œ": ["ì‚¬ì—… ì‹¤ì  ê´€ë¦¬"]
      },
      "ì„œë¹„ìŠ¤ ìš´ì˜": {
        "ì‚¬ìš©ì ê´€ë¦¬": ["ê³„ì • ê´€ë¦¬"],
        "êµ¬ë… ê´€ë¦¬": ["êµ¬ë… í˜„í™©"],
        "DevOps": ["On-device AI ëª¨ë¸", "Cloud AI ê¸°ëŠ¥", "ì„œë¹„ìŠ¤ ì—°ë™ ê´€ë¦¬"],
        "Support Center": ["ìœ í”ŒëŸ¬ìŠ¤", "Aì‚¬(ê³ ê°ì‚¬)", "ê³µì§€/SOP/FAQ"]
      },
      "ì„œë¹„ìŠ¤ ì •ì‚°": {
        "ì²­êµ¬/ìˆ˜ë‚©": ["ê³ ê°ì‚¬ë³„ ì²­êµ¬"]
      },
      "ì¼ë°˜": {
        "ì‹œìŠ¤í…œ": ["ë³´ì•ˆ/ì»´í”Œë¼ì´ì–¸ìŠ¤", "ì„¤ì •"],
        "Global": ["ë¡œê·¸ì¸/ì¸ì¦", "ë§ˆì´í˜ì´ì§€"]
      }
    };

    let currentTop = "ìƒí’ˆ ìš´ì˜";
    let currentL2 = "ìƒí’ˆ ê´€ë¦¬";
    let currentL3 = "ìƒí’ˆ ê¸°ì¤€ ì •ë³´";

    /* =========================
       ê¸°ì¤€ì •ë³´ ì¡°íšŒìš© ìƒ˜í”Œ ë°ì´í„° + ë²„ì „ ì •ë³´
    ========================= */
    const REFERENCE_ITEMS = [
      // Order: Product -> Feature Group -> Feature -> Billing -> Discount
      {
        type: "ìƒí’ˆ",
        code: "PKG-ixi_O-BASIC",
        name: "ixi-O ê¸°ë³¸ íŒ¨í‚¤ì§€",
        created: "2025-01-01",
        valid_from: "2025-01-01",
        valid_to: "9999-12-31",
        status: "ë“±ë¡",
        history: [
          { date: "2025-01-01", action: "ìƒì„±", user: "admin", desc: "ìµœì´ˆ ë“±ë¡" }
        ]
      },
      {
        type: "ê¸°ëŠ¥ê·¸ë£¹",
        code: "FG-CALL-EASE",
        name: "í†µí™” í¸ì˜",
        created: "2024-12-01",
        valid_from: "2024-12-01",
        valid_to: "9999-12-31",
        status: "ë“±ë¡",
        history: [
          { date: "2024-12-01", action: "ìƒì„±", user: "admin", desc: "ìµœì´ˆ ë“±ë¡" },
          { date: "2025-02-15", action: "ë³€ê²½", user: "admin", desc: "ì„¤ëª… ìˆ˜ì •" }
        ]
      },
      {
        type: "ê¸°ëŠ¥",
        code: "FT-SEE-CALL",
        name: "ë³´ì´ëŠ” ì „í™”",
        created: "2024-11-15",
        valid_from: "2024-11-15",
        valid_to: "9999-12-31",
        status: "ë“±ë¡",
        image: "https://via.placeholder.com/560x320.png?text=%EB%B3%B4%EC%9D%B4%EB%8A%94+%EC%A0%84%ED%99%94+UI",
        history: [
          { date: "2024-11-15", action: "ìƒì„±", user: "admin", desc: "ìµœì´ˆ ë“±ë¡" }
        ]
      },
      {
        type: "ê¸°ëŠ¥",
        code: "FT-CALL-SUM",
        name: "í†µí™” ìš”ì•½",
        created: "2024-11-20",
        valid_from: "2024-11-20",
        valid_to: "2025-06-30",
        status: "ì‚­ì œ",
        history: [
          { date: "2024-11-20", action: "ìƒì„±", user: "admin", desc: "ìµœì´ˆ ë“±ë¡" },
          { date: "2025-06-30", action: "ì‚­ì œ", user: "admin", desc: "ì„œë¹„ìŠ¤ ì¢…ë£Œë¡œ ì‚­ì œ" }
        ]
      },
      {
        type: "ê³¼ê¸ˆìš”ì†Œ",
        code: "BG-ixi_O-01",
        name: "ixi-O ì¸ë‹¹ ê³¼ê¸ˆ(í‘œì¤€)",
        created: "2025-01-01",
        valid_from: "2025-01-01",
        valid_to: "9999-12-31",
        status: "ë“±ë¡",
        billingUnit: "ì¸ë‹¹",
        targetProduct: "ìƒí’ˆ ê°€ì…ì",
        unitPrice: 0.50,
        history: [
          { date: "2025-01-01", action: "ìƒì„±", user: "admin", desc: "ìµœì´ˆ ë“±ë¡" }
        ]
      },
      {
        type: "í• ì¸ìš”ì†Œ",
        code: "DC-ixi_O-LAUNCH",
        name: "ixi-O ëŸ°ì¹­ 3ê°œì›” 50% í• ì¸",
        created: "2025-01-15",
        valid_from: "2025-01-15",
        valid_to: "9999-12-31",
        status: "ë“±ë¡",
        discountTarget: "ê³¼ê¸ˆ í• ì¸",
        discountType: "ì •ë¥ ",
        discountValue: 50,
        condition: "ê¸°ê°„",
        history: [
          { date: "2025-01-15", action: "ìƒì„±", user: "admin", desc: "ëŸ°ì¹­ í”„ë¡œëª¨ì…˜ ë“±ë¡" }
        ]
      }
    ];
    let selectedReferenceCode = null;

    /* =========================
       Breadcrumb
    ========================= */
    function renderBreadcrumb(top, l2, l3) {
      const el = document.getElementById("breadcrumb");
      el.innerHTML = `
        <span>${top}</span>
        <span>â€º</span>
        <span>${l2}</span>
        ${l3 ? `<span>â€º</span><span class="current">${l3}</span>` : ""}
      `;
    }

    /* =========================
       ë©”ì¸ í˜ì´ì§€ ë Œë”ë§
    ========================= */
    function renderPage(top, l2, l3) {
      const container = document.getElementById("page-inner");

      // ìƒí’ˆ ê¸°ì¤€ ì •ë³´ â€“ ì‹¤ì œ í™”ë©´
      if (top === "ìƒí’ˆ ìš´ì˜" && l2 === "ìƒí’ˆ ê´€ë¦¬" && l3 === "ìƒí’ˆ ê¸°ì¤€ ì •ë³´") {
        container.innerHTML = getProductStandardHTML();
        renderBreadcrumb(top, l2, l3);
        initProductStandardPage();
        return;
      }

      // ë‚˜ë¨¸ì§€ëŠ” Stub
      container.innerHTML = `
        <div class="page-title">${l3 || l2}</div>
        <div class="stub-card">
          <div class="stub-title">í™”ë©´ ìƒì„¸ ê¸°íš ì¤‘ì…ë‹ˆë‹¤.</div>
          <p class="stub-desc">
            [${top} &gt; ${l2}${l3 ? " &gt; " + l3 : ""}] ê²½ë¡œì˜ ìƒì„¸ ê¸°ëŠ¥ í™”ë©´ì€ ì¶”í›„ ê¸°íš/ì„¤ê³„ í›„ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤.
          </p>
        </div>
      `;
      renderBreadcrumb(top, l2, l3);
    }

    function getProductStandardHTML() {
      return `
        <!-- ë©”ì¸ View: ì¡°íšŒ ëª©ë¡ + ìƒì„¸ -->
        <div id="view-list" class="view-section active">
          <div class="page-title">ìƒí’ˆ ê¸°ì¤€ ì •ë³´</div>

          <section class="card">
            <div class="section-header">
              <div>
                <h2 class="section-title">ê¸°ì¤€ì •ë³´ ëª©ë¡ (Snapshot)</h2>
                <p class="section-desc">
                  ì„ íƒí•œ ê¸°ì¤€ì¼ì ê¸°ì¤€ìœ¼ë¡œ ìœ íš¨í•œ ìƒí’ˆ/ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥/ê³¼ê¸ˆìš”ì†Œ/í• ì¸ìš”ì†Œë¥¼ í•œ ë²ˆì— ì¡°íšŒí•©ë‹ˆë‹¤.
                </p>
              </div>
              <div class="btn-group-right" style="margin-top:0;">
              <div class="btn-group-right" style="margin-top:0; gap:8px;">
                <button class="btn-primary" id="btn-go-register-page" style="height:36px;">
                  + ì‹ ê·œ ë“±ë¡ (í˜ì´ì§€)
                </button>
                <button class="btn-primary" id="btn-go-register-modal" style="height:36px; background: #4f46e5;">
                    + ì‹ ê·œ ë“±ë¡ (ëª¨ë‹¬)
                </button>
              </div>
              </div>
            </div>
            <div class="section-body">
              <div class="snapshot-banner">
                <span>ğŸ“… <strong>ìŠ¤ëƒ…ìƒ· ì¡°íšŒ ëª¨ë“œ:</strong> í˜„ì¬ ì„ íƒëœ ì¼ì(<span id="snapshot-date-display">2025-12-09</span>) ê¸°ì¤€ìœ¼ë¡œ ìœ íš¨í•œ ê¸°ì¤€ì •ë³´ë§Œ í‘œì‹œí•©ë‹ˆë‹¤. ê³¼ê±° ì´ë ¥ì„ ë³´ë ¤ë©´ ê¸°ì¤€ì¼ìë¥¼ ë³€ê²½í•˜ì„¸ìš”.</span>
              </div>

              <div class="inline-row" style="margin-bottom:4px; gap:8px;">
                <div class="form-field-group" style="max-width:200px;">
                  <input type="date" class="field-input" id="lookup-date" value="2025-12-09" />
                </div>
                <div class="form-field-group" style="max-width:140px;">
                  <select class="field-select" id="filter-type">
                    <option value="ALL">ì „ì²´ ìœ í˜•</option>
                    <option value="ìƒí’ˆ">ìƒí’ˆ</option>
                    <option value="ê¸°ëŠ¥ê·¸ë£¹">ê¸°ëŠ¥ê·¸ë£¹</option>
                    <option value="ê¸°ëŠ¥">ê¸°ëŠ¥</option>
                    <option value="ê³¼ê¸ˆìš”ì†Œ">ê³¼ê¸ˆìš”ì†Œ</option>
                    <option value="í• ì¸ìš”ì†Œ">í• ì¸ìš”ì†Œ</option>
                  </select>
                </div>
                <button class="btn-secondary" type="button" id="btn-lookup">ì¡°íšŒ</button>
              </div>

              <div class="table-wrap">
                <table>
                  <thead>
                    <tr>
                      <th>ìœ í˜•</th>
                      <th>ì½”ë“œ</th>
                      <th>ëª…ì¹­</th>
                      <th>ìµœì´ˆ ìƒì„±ì¼ì</th>
                    </tr>
                  </thead>
                  <tbody id="reference-tbody"></tbody>
                </table>
              </div>
              <p class="help-text">
                â€» í–‰ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ê¸°ì¤€ì •ë³´ì˜ ìƒì„¸/ë³€ê²½ í™”ë©´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
                (ìƒì„¸ ì •ë³´ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì”© í‘œì‹œë©ë‹ˆë‹¤)
              </p>
            </div>
          </section>

          <!-- 5ê°œ ìƒì„¸ í™”ë©´ì„ ëª¨ë‘ ë‚˜ì—´í•˜ëŠ” ì˜ì—­ -->
          <div id="reference-detail-list"></div>
        </div>

        <!-- ë“±ë¡ View: ì‹ ê·œ ë“±ë¡ í¼ -->
        <div id="view-register" class="view-section">
          <div class="page-title">ê¸°ì¤€ì •ë³´ ë“±ë¡</div>
          
          <section class="card">
            <div class="section-header">
              <div>
                <h2 class="section-title">ë“±ë¡ ëŒ€ìƒ ì„ íƒ</h2>
                <p class="section-desc">
                  ìƒí’ˆ/ê¸°ëŠ¥/ê¸°ëŠ¥ê·¸ë£¹, ê³¼ê¸ˆ/í• ì¸ ìš”ì†Œë¥¼ í•˜ë‚˜ì˜ í™”ë©´ì—ì„œ ë“±ë¡Â·ê´€ë¦¬í•©ë‹ˆë‹¤.
                  ì„œë¹„ìŠ¤ êµ¬ì„±(ìƒí’ˆ/ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥)ê³¼ ê³¼ê¸ˆÂ·í• ì¸ ì •ì±…(ê³¼ê¸ˆìš”ì†Œ/í• ì¸ìš”ì†Œ)ì„ ì‹œê°ì ìœ¼ë¡œ ë¶„ë¦¬í•´ ì„ íƒí•©ë‹ˆë‹¤.
                </p>
              </div>
              <div class="btn-group-right" style="margin-top:0;">
                <button class="btn-secondary" id="btn-back-list-page" style="height:36px;">
                  ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </button>
              </div>
            </div>
            <div class="section-body">
              <div class="type-groups">
                <div>
                  <div class="type-group-title">ì„œë¹„ìŠ¤ êµ¬ì„± (ë“±ë¡ ìœ í˜• ì„ íƒ)</div>
                  <div class="process-steps" id="chip-group-service">
                    <div class="process-step active" data-type="ê¸°ëŠ¥">
                      <!-- Removed Step Number --> ê¸°ëŠ¥
                    </div>
                    <div class="process-step" data-type="ê¸°ëŠ¥ê·¸ë£¹">
                      ê¸°ëŠ¥ê·¸ë£¹
                    </div>
                    <div class="process-step" data-type="ìƒí’ˆ">
                      ìƒí’ˆ
                    </div>
                  </div>
                </div>
                <div>
                  <div class="type-group-title">ê³¼ê¸ˆ / í• ì¸ ì •ì±… (ëª¨ë“ˆ)</div>
                  <div class="policy-cards" id="chip-group-billing">
                    <div class="policy-card" data-type="ê³¼ê¸ˆìš”ì†Œ">
                      <span class="policy-card-icon">ğŸ’°</span> ê³¼ê¸ˆìš”ì†Œ
                    </div>
                    <div class="policy-card" data-type="í• ì¸ìš”ì†Œ">
                      <span class="policy-card-icon">ğŸ·ï¸</span> í• ì¸ìš”ì†Œ
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <div id="register-tab-inner-page"></div>
        </div>

        <!-- ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ (Hidden by default) -->
        <div class="modal-overlay" id="modal-register">
            <div class="modal-container">
                <div class="modal-header">
                    <div class="modal-title">ê¸°ì¤€ì •ë³´ ì‹ ê·œ ë“±ë¡</div>
                    <button class="modal-close-btn" id="btn-close-modal">Ã—</button>
                </div>
                <div class="modal-body">
                    <!-- ëª¨ë‹¬ ë‚´ë¶€ìš© ì»¨í…ì¸  ì˜ì—­ -->
                     <section class="card" style="margin-bottom: 20px;">
                        <div class="section-header">
                          <div>
                            <h2 class="section-title">ë“±ë¡ ëŒ€ìƒ ì„ íƒ</h2>
                            <p class="section-desc">
                              ë“±ë¡í•  ê¸°ì¤€ì •ë³´ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”.
                            </p>
                          </div>
                        </div>
                        <div class="section-body">
                          <div class="type-groups">
                            <div>
                              <div class="type-group-title">ì„œë¹„ìŠ¤ êµ¬ì„± (ë“±ë¡ ìœ í˜• ì„ íƒ)</div>
                              <div class="process-steps" id="chip-group-service-modal">
                                <div class="process-step active" data-type="ê¸°ëŠ¥">ê¸°ëŠ¥</div>
                                <div class="process-step" data-type="ê¸°ëŠ¥ê·¸ë£¹">ê¸°ëŠ¥ê·¸ë£¹</div>
                                <div class="process-step" data-type="ìƒí’ˆ">ìƒí’ˆ</div>
                              </div>
                            </div>
                            <div>
                              <div class="type-group-title">ê³¼ê¸ˆ / í• ì¸ ì •ì±… (ëª¨ë“ˆ)</div>
                              <div class="policy-cards" id="chip-group-billing-modal">
                                <div class="policy-card" data-type="ê³¼ê¸ˆìš”ì†Œ"><span class="policy-card-icon">ğŸ’°</span> ê³¼ê¸ˆìš”ì†Œ</div>
                                <div class="policy-card" data-type="í• ì¸ìš”ì†Œ"><span class="policy-card-icon">ğŸ·ï¸</span> í• ì¸ìš”ì†Œ</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>
                    <div id="register-tab-inner-modal"></div>
                </div>
            </div>
        </div>
      `;
    }

    /* =========================
       ê¸°ì¤€ì •ë³´ ë“±ë¡ íƒ­ ë Œë”ë§
    ========================= */
    // let currentRegisterType = "ê¸°ëŠ¥"; // Removed duplicate

    let currentRegisterType = "ê¸°ëŠ¥"; // ê¸°ë³¸ê°’: ê¸°ëŠ¥ (Step 1)
    let currentRenderTarget = "register-tab-inner-page"; // Default target

    // [Modified] Accepts target ID to render into specific container (Page or Modal)
    function renderRegisterForm(targetId = currentRenderTarget) {
      const container = document.getElementById(targetId);
      if (!container) return;

      if (currentRegisterType === "ìƒí’ˆ") {
        container.innerHTML = getFormProductHTML();
      } else if (currentRegisterType === "ê¸°ëŠ¥ê·¸ë£¹") {
        container.innerHTML = getFormFeatureGroupHTML();
      } else if (currentRegisterType === "ê¸°ëŠ¥") {
        container.innerHTML = getFormFeatureHTML();
        // Attach Upload Handlers
        attachFeatureFormHandlers();
      } else if (currentRegisterType === "ê³¼ê¸ˆìš”ì†Œ") {
        container.innerHTML = getFormBillingHTML();
      } else if (currentRegisterType === "í• ì¸ìš”ì†Œ") {
        container.innerHTML = getFormDiscountHTML();
      }
    }

    function getFormProductHTML() {
      return `
        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">ìƒí’ˆ ê¸°ë³¸ ì •ë³´</h2>
              <p class="section-desc">
                ê³ ê°ì‚¬ê°€ ì²­ì•½í•˜ëŠ” ë‹¨ìœ„ì¸ ìƒí’ˆì„ ì •ì˜í•©ë‹ˆë‹¤. ìƒí’ˆì—ëŠ” í•˜ë‚˜ ì´ìƒì˜ ê¸°ëŠ¥ê·¸ë£¹ì´ í¬í•¨ë˜ë©°,
                ê³ ê°ì‚¬ëŠ” ìƒí’ˆ êµ¬ì„± ìì²´ë¥¼ ì„ì˜ë¡œ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body form-grid-2col">
            <div class="form-label">ìƒí’ˆëª…</div>
            <div class="form-field-group">
              <input class="field-input w-lg" type="text" placeholder="ì˜ˆ: ixi-O ê¸°ë³¸ íŒ¨í‚¤ì§€" />
            </div>

            <div class="form-label">ì„¤ëª…</div>
            <div class="form-field-group">
              <textarea class="field-textarea" placeholder="ìƒí’ˆì˜ ì£¼ìš” ëŒ€ìƒ, í¬í•¨ ê¸°ëŠ¥, ìœ ì˜ì‚¬í•­ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">í•˜ìœ„ ê¸°ëŠ¥ê·¸ë£¹ êµ¬ì„±</h2>
              <p class="section-desc">
                ì‚¬ì „ì— ë“±ë¡ëœ ê¸°ëŠ¥ê·¸ë£¹ ì¤‘ ì´ ìƒí’ˆì— í¬í•¨í•  ê·¸ë£¹ì„ ì„ íƒí•©ë‹ˆë‹¤.
                ë™ì¼ ê¸°ëŠ¥ê·¸ë£¹ì€ ì—¬ëŸ¬ ìƒí’ˆì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body">
            <div class="form-field-group">
              <div class="field-note">â€» ì•„ë˜ ëª©ë¡ì€ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ ê²€ìƒ‰/í•„í„°/í˜ì´ì§•ì´ ì ìš©ë©ë‹ˆë‹¤.</div>
              <div class="table-wrap">
                <table>
                  <thead>
                    <tr>
                      <th style="width:40px;"></th>
                      <th>ì½”ë“œ</th>
                      <th>ê¸°ëŠ¥ê·¸ë£¹ëª…</th>
                      <th>ì„¤ëª…</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><input type="checkbox" checked /></td>
                      <td>FG-CALL-EASE</td>
                      <td>í†µí™” í¸ì˜</td>
                      <td>ë³´ì´ëŠ” ì „í™”, í†µí™” ìš”ì•½ ë“± í†µí™” UX í–¥ìƒ ê¸°ëŠ¥ ê·¸ë£¹</td>
                    </tr>
                    <tr>
                      <td><input type="checkbox" /></td>
                      <td>FG-SECURE</td>
                      <td>ë³´ì•ˆ</td>
                      <td>ë³´ì´ìŠ¤í”¼ì‹± ê°ì§€, ìŠ¤íŒ¸ ì°¨ë‹¨ ë“± ë³´ì•ˆ ê´€ë ¨ ê¸°ëŠ¥ ê·¸ë£¹</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <span class="field-note">â€» ê³ ê°ì‚¬ëŠ” ìƒí’ˆ êµ¬ì„±(í¬í•¨ ê¸°ëŠ¥ê·¸ë£¹/ê¸°ëŠ¥)ì„ ì§ì ‘ ë³€ê²½í•  ìˆ˜ ì—†ìœ¼ë©°, ë‹¹ì‚¬ì—ì„œë§Œ ë³€ê²½ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span>
            </div>
          </div>

          <div class="btn-group-right">
            <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
            <button class="btn-primary" type="button" onclick="alert('ìƒí’ˆ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ ì ìš© ì¼ì ì„ íƒ íŒì—…ê³¼ ì—°ë™ë©ë‹ˆë‹¤.')">ë“±ë¡</button>
          </div>
        </section>
      `;
    }

    function getFormFeatureGroupHTML() {
      return `
        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">ê¸°ëŠ¥ê·¸ë£¹ ê¸°ë³¸ ì •ë³´</h2>
              <p class="section-desc">
                ìœ ì‚¬í•œ ì„±ê²©ì˜ ê¸°ëŠ¥ì„ ë¬¶ì–´ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë‹¨ìœ„ì…ë‹ˆë‹¤.
                ë™ì¼ ê¸°ëŠ¥ì€ ì—¬ëŸ¬ ê¸°ëŠ¥ê·¸ë£¹ì— í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body form-grid-2col">
            <div class="form-label">ê¸°ëŠ¥ê·¸ë£¹ëª…</div>
            <div class="form-field-group">
              <input class="field-input w-md" type="text" placeholder="ì˜ˆ: í†µí™” í¸ì˜" />
            </div>

            <div class="form-label">ì„¤ëª…</div>
            <div class="form-field-group">
              <textarea class="field-textarea" placeholder="ì´ ê¸°ëŠ¥ê·¸ë£¹ì— í¬í•¨ë˜ëŠ” ê¸°ëŠ¥ì˜ ê³µí†µ ëª©ì ê³¼ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">í•˜ìœ„ ê¸°ëŠ¥ êµ¬ì„±</h2>
              <p class="section-desc">
                ì‚¬ì „ì— ë“±ë¡ëœ ê¸°ëŠ¥ ëª©ë¡ì—ì„œ ì´ ê¸°ëŠ¥ê·¸ë£¹ì— í¬í•¨í•  ê¸°ëŠ¥ì„ ì„ íƒí•©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body">
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th style="width:40px;"></th>
                    <th>ì½”ë“œ</th>
                    <th>ê¸°ëŠ¥ëª…</th>
                    <th>ì„¤ëª…</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><input type="checkbox" checked /></td>
                    <td>FT-SEE-CALL</td>
                    <td>ë³´ì´ëŠ” ì „í™”</td>
                    <td>ì°©ì‹  ì‹œ ë°œì‹ ì ì •ë³´ì™€ í™”ë©´ì„ í•¨ê»˜ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥</td>
                  </tr>
                  <tr>
                    <td><input type="checkbox" /></td>
                    <td>FT-CALL-SUM</td>
                    <td>í†µí™” ìš”ì•½</td>
                    <td>í†µí™” ì¢…ë£Œ í›„ ì£¼ìš” ë‚´ìš©ì„ ìš”ì•½í•´ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <span class="field-note">â€» ë™ì¼ ê¸°ëŠ¥ì€ ì—¬ëŸ¬ ê¸°ëŠ¥ê·¸ë£¹ì— ì¤‘ë³µ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
          </div>

          <div class="btn-group-right">
            <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
            <button class="btn-primary" type="button" onclick="alert('ê¸°ëŠ¥ê·¸ë£¹ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.')">ë“±ë¡</button>
          </div>
        </section>
      `;
    }


    /* =========================
        ê¸°ëŠ¥ ë“±ë¡ í¼ í•¸ë“¤ëŸ¬ (ì´ë¯¸ì§€ ì—…ë¡œë“œ ë¡œì§)
    ========================= */
    function attachFeatureFormHandlers() {
      // Helper to setup upload logic
      const setupUpload = (inputId, dropzoneId, previewId, isIcon) => {
        const input = document.getElementById(inputId);
        const dropzone = document.getElementById(dropzoneId);
        const previewCtx = document.getElementById(previewId);

        if (!input || !dropzone || !previewCtx) return;

        const trigger = () => input.click();
        dropzone.addEventListener("click", trigger);

        input.addEventListener("change", (e) => {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (ev) => {
              // Hide dropzone, Show preview
              dropzone.style.display = "none";
              previewCtx.style.display = isIcon ? "block" : "flex"; // Icon: block, Image: flex/block

              // Inject HTML
              previewCtx.innerHTML = `
                                <div class="preview-container" style="${isIcon ? 'width:64px; height:64px;' : 'width:100%; max-width:400px;'}">
                                    <img src="${ev.target.result}" alt="Preview" />
                                    <button type="button" class="btn-remove-image" id="remove-${inputId}">âœ•</button>
                                </div>
                            `;

              // Attach remove handler
              const removeBtn = document.getElementById(`remove-${inputId}`);
              if (removeBtn) {
                removeBtn.addEventListener("click", (e) => {
                  e.stopPropagation(); // prevent bubbling
                  input.value = ""; // clear input
                  previewCtx.innerHTML = "";
                  previewCtx.style.display = "none";
                  dropzone.style.display = isIcon ? "flex" : "block"; // Restore
                });
              }
            };
            reader.readAsDataURL(file);
          }
        });
      };

      // Icon Upload
      setupUpload("input-feature-icon", "dropzone-feature-icon", "preview-feature-icon", true);
      // Main Image Upload
      setupUpload("input-feature-image", "dropzone-feature-image", "preview-feature-image", false);
    }

    function getFormFeatureHTML() {
      return `
        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">ê¸°ëŠ¥ ê¸°ë³¸ ì •ë³´</h2>
              <p class="section-desc">
                ìµœì¢… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë˜ëŠ” ë‹¨ìœ„ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì´ë¯¸ì§€ëŠ”
                ê¸°ì¤€ì •ë³´ ì¡°íšŒÂ·ë³€ê²½ íƒ­ì—ì„œ ê¸°ëŠ¥ ìƒì„¸ í™•ì¸ ì‹œ ìƒë‹¨ì— ë…¸ì¶œë©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body form-grid-2col">
            <div class="form-label">ê¸°ëŠ¥ ì•„ì´ì½˜</div>
            <div class="form-field-group">
                <input type="file" id="input-feature-icon" hidden accept="image/*" />
                <div id="dropzone-feature-icon" class="upload-icon-box" title="ì•„ì´ì½˜ ì—…ë¡œë“œ">
                    <span style="font-size:20px;">+</span>
                </div>
                <div id="preview-feature-icon" style="display:none;"></div>
                <span class="field-note" style="margin-top:6px;">ì•± ë¦¬ìŠ¤íŠ¸ ë° ë©”ë‰´ì— ë…¸ì¶œë˜ëŠ” ì•„ì´ì½˜ (64x64 ê¶Œì¥)</span>
            </div>

            <div class="form-label">ê¸°ëŠ¥ëª…</div>
            <div class="form-field-group">
              <input class="field-input w-md" type="text" placeholder="ì˜ˆ: ë³´ì´ëŠ” ì „í™”" />
            </div>

            <div class="form-label">ì„¤ëª…</div>
            <div class="form-field-group">
              <textarea class="field-textarea" placeholder="ì‚¬ìš©ìê°€ ì¸ì§€í•˜ëŠ” ê¸°ëŠ¥ ëª©ì ê³¼ ì£¼ìš” ì‚¬ìš© íë¦„ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
            </div>

            <div class="form-label">ëŒ€í‘œ ì´ë¯¸ì§€</div>
            <div class="form-field-group">
              <input type="file" id="input-feature-image" hidden accept="image/*" />
              <div id="dropzone-feature-image" class="upload-dropzone">
                <div style="font-weight:500; margin-bottom:4px;">ëŒ€í‘œ ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ</div>
                <div>ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ Drag & Drop í•˜ê±°ë‚˜, í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.</div>
                <div class="field-note" style="margin-top:4px;">
                  PNG/JPEG, 5MB ì´í•˜ ê¶Œì¥. í†µí™” ì•± ë‚´ ì‹¤ì œ í™”ë©´ê³¼ ìµœëŒ€í•œ ìœ ì‚¬í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
                </div>
              </div>
              <div id="preview-feature-image" style="display:none;"></div>
            </div>
          </div>

          <div class="btn-group-right">
            <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
            <button class="btn-primary" type="button" onclick="alert('ê¸°ëŠ¥ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.')">ë“±ë¡</button>
          </div>
        </section>
      `;
    }

    function getFormBillingHTML() {
      return `
        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">ê³¼ê¸ˆìš”ì†Œ ê¸°ë³¸ ì •ë³´</h2>
              <p class="section-desc">
                ìƒí’ˆê³¼ ë…ë¦½ëœ ê³¼ê¸ˆ ì†ì„±ì„ ì •ì˜í•©ë‹ˆë‹¤. ì‹¤ì œ ê³„ì•½ ìƒì„± ì‹œ ê³ ê°ì‚¬-ìƒí’ˆê³¼ ë§¤í•‘ë˜ì–´
                ì¸ë‹¹ ë‹¨ê°€, ë¬´ê³¼ê¸ˆ êµ¬ê°„ ë“±ì˜ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
              </p>
            </div>
            <span class="section-badge">ê³¼ê¸ˆ ì •ì±…</span>
          </div>
          <div class="section-body form-grid-2col">
            <div class="form-label">ìš”ì†Œëª…</div>
            <div class="form-field-group">
              <input class="field-input w-md" type="text" placeholder="ì˜ˆ: ixi-O ì¸ë‹¹ ê³¼ê¸ˆ(í‘œì¤€)" />
            </div>

            <div class="form-label">ì„¤ëª…</div>
            <div class="form-field-group">
              <textarea class="field-textarea" placeholder="ì ìš© ëŒ€ìƒ ìƒí’ˆ, ê¸°ë³¸ ë‹¨ê°€, ë¬´ê³¼ê¸ˆ êµ¬ê°„ ë“± ê³¼ê¸ˆ ì •ì±…ì„ ì„¤ëª…í•©ë‹ˆë‹¤."></textarea>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">ê³¼ê¸ˆ ì†ì„±</h2>
              <p class="section-desc">
                ê³¼ê¸ˆ ë‹¨ìœ„ì™€ í‘œì¤€ ë‹¨ê°€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. ì˜ˆì‹œëŠ” ì¸ë‹¹ ê³¼ê¸ˆ ê¸°ì¤€ì´ë©°, ìƒí’ˆ ê°€ì…ì ìˆ˜ì— ë‹¨ê°€ë¥¼ ê³±í•´ ì›” ê³¼ê¸ˆì„ ì‚°ì •í•©ë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body">
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>ê³¼ê¸ˆ ë‹¨ìœ„</th>
                    <th>ì ìš© ëŒ€ìƒ</th>
                    <th>í‘œì¤€ ë‹¨ê°€(USD)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ì¸ë‹¹</td>
                    <td>ìƒí’ˆ ê°€ì…ì</td>
                    <td><input class="field-input w-xs" type="number" step="0.01" placeholder="ì˜ˆ: 0.50" /></td>
                  </tr>
                </tbody>
              </table>
            </div>
            <span class="field-note">
              â€» ë¬´ê³¼ê¸ˆëŸ‰, ê³¼ê¸ˆ ìƒí•œ ë“± ì¶”ê°€ ì •ì±…ì€ ê³„ì•½Â·í• ì¸ ì •ì±…ê³¼ ì—°ë™í•˜ì—¬ ë³„ë„ ì •ì˜í•©ë‹ˆë‹¤.
            </span>
          </div>

          <div class="btn-group-right">
            <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
            <button class="btn-primary" type="button" onclick="alert('ê³¼ê¸ˆìš”ì†Œ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.')">ë“±ë¡</button>
          </div>
        </section>
      `;
    }

    function getFormDiscountHTML() {
      return `
        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">í• ì¸ìš”ì†Œ ê¸°ë³¸ ì •ë³´</h2>
              <p class="section-desc">
                ê³„ì•½ ê¸°ê°„, ê°€ì…ì ìˆ˜, ì¼íšŒì„± ì´ë²¤íŠ¸ ë“±ì— ë”°ë¼ ì¡°ê±´ë¶€ë¡œ ì ìš©ë˜ëŠ” í• ì¸ ì •ì±…ì„ ì •ì˜í•©ë‹ˆë‹¤.
              </p>
            </div>
            <span class="section-badge">í• ì¸ ì •ì±…</span>
          </div>
          <div class="section-body form-grid-2col">
            <div class="form-label">ìš”ì†Œëª…</div>
            <div class="form-field-group">
              <input class="field-input w-lg" type="text" placeholder="ì˜ˆ: ixi-O ëŸ°ì¹­ 3ê°œì›” 50% í• ì¸" />
            </div>

            <div class="form-label">ì„¤ëª…</div>
            <div class="form-field-group">
              <textarea class="field-textarea" placeholder="í• ì¸ ì ìš© ì‹œì , ëª©ì , ëŒ€ìƒ ë“±ì„ ì…ë ¥í•©ë‹ˆë‹¤. ì˜ˆ: ê³„ì•½ì›” ê¸°ì¤€ 3ê°œì›”ê°„ 50% í• ì¸ ì œê³µ ë“±"></textarea>
            </div>
          </div>
        </section>

        <section class="card">
          <div class="section-header">
            <div>
              <h2 class="section-title">í• ì¸ ì†ì„±</h2>
              <p class="section-desc">
                í• ì¸ ëŒ€ìƒ, í˜•íƒœ, í• ì¸ì•¡/ë¥  ë° ì ìš© ì¡°ê±´ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë³µìˆ˜ í• ì¸ ì ìš© ì‹œ ìš°ì„ ìˆœìœ„ ì •ì±…ì€ ì¶”í›„ ì •ì˜(TBD)ë¡œ ë‚¨ê²¨ë‘¡ë‹ˆë‹¤.
              </p>
            </div>
          </div>
          <div class="section-body">
            <!-- í• ì¸ ì†ì„± ê·¸ë£¹ ë°•ìŠ¤ -->
            <div class="gray-box form-grid-2col">
              <div class="form-label">í• ì¸ ëŒ€ìƒ</div>
              <div class="form-field-group">
                <div class="radio-group">
                  <label><input type="radio" name="disc-target" checked /> ê³¼ê¸ˆ í• ì¸ (ë‹¨ê°€ì— í• ì¸ ì ìš©)</label>
                  <label><input type="radio" name="disc-target" /> ì²­êµ¬ í• ì¸ (ì›” ê³¼ê¸ˆ ì´ì•¡ì— í• ì¸ ì ìš©)</label>
                </div>
              </div>

              <div class="form-label">í• ì¸ ì •ì˜</div>
              <div class="form-field-group">
                <div class="integrated-input-row">
                  <!-- í• ì¸ í˜•íƒœ -->
                  <div class="radio-group">
                    <label><input type="radio" name="disc-type" checked /> ì •ì•¡</label>
                    <label><input type="radio" name="disc-type" /> ì •ë¥ </label>
                  </div>
                  
                  <span class="integrated-divider"></span>

                  <!-- í• ì¸ê°’ ì…ë ¥ -->
                  <div style="display:flex; align-items:center; gap:8px;">
                    <input class="field-input w-xs" type="number" placeholder="ì˜ˆ: 1000" />
                    <span style="font-size:13px; color:var(--text-sub);">ì› (ë˜ëŠ” %)</span>
                  </div>
                </div>
                <span class="field-note" style="margin-top:6px;">
                  â€» ì •ì•¡: í†µí™” ë‹¨ê°€/ì²­êµ¬ ê¸ˆì•¡ì—ì„œ ê³ ì • ê¸ˆì•¡ ì°¨ê°, ì •ë¥ : ë‹¨ê°€/ê¸ˆì•¡ì— ë¹„ìœ¨(%) í• ì¸ ì ìš©
                </span>
              </div>
            </div>

            <!-- ì ìš© ì¡°ê±´ ê·¸ë£¹ (ë°•ìŠ¤ ë°–) -->
            <div class="form-grid-2col">
              <div class="form-label">ì ìš© ì¡°ê±´</div>
            <div class="form-field-group">
              <div class="radio-group">
                <label><input type="radio" name="disc-cond" checked /> ê¸°ê°„</label>
                <label><input type="radio" name="disc-cond" /> ê°€ì…ì</label>
                <label><input type="radio" name="disc-cond" /> ì¼íšŒì„±</label>
              </div>
              <span class="field-note">
                ê¸°ê°„: ê³„ì•½ì›” ê¸°ì¤€ ìƒëŒ€ì›”ì´ë‚˜ ì ˆëŒ€ì›”ë¡œ í• ì¸ ê¸°ê°„ ì§€ì •, ê°€ì…ì: ì›” í‰ê·  ê°€ì…ì ìˆ˜ì— ë”°ë¼ step í• ì¸ ì ìš©, ì¼íšŒì„±: íŠ¹ì • ì²­êµ¬ì›” 1íšŒì„± í”„ë¡œëª¨ì…˜ ë“±
              </span>
            </div>

            <div class="form-label">ê¸°ê°„ ì¡°ê±´</div>
            <div class="form-field-group">
              <div class="inline-row">
                <select class="field-select" style="max-width:160px;">
                  <option>ê³„ì•½ì›” ê¸°ì¤€ ìƒëŒ€ì›”</option>
                  <option>ì ˆëŒ€ì›”</option>
                </select>
                <input class="field-input w-md" type="text" placeholder="ì˜ˆ: ê³„ì•½ì›”+1 ~ +3 (3ê°œì›”ê°„)" />
              </div>
              <span class="field-note">
                ì˜ˆ: ìµœì´ˆ ì²­êµ¬ì›”ë¶€í„° 3ê°œì›”ê°„ ì¸ë‹¹ ë‹¨ê°€ 50% í• ì¸ (ê³„ì•½ì›”+0 ~ +2)
              </span>
            </div>

            <div class="form-label">ê°€ì…ì ì¡°ê±´</div>
            <div class="form-field-group">
              <div class="inline-row">
                <input class="field-input w-sm" type="number" placeholder="ì˜ˆ: 100000" />
                <select class="field-select" style="max-width:120px;">
                  <option>ì´ìƒ</option>
                  <option>ì´ˆê³¼</option>
                  <option>ì´í•˜</option>
                </select>
              </div>
              <span class="field-note">
                ì˜ˆ: ê°€ì…ì 10ë§Œ ëª… ì´ˆê³¼ ì‹œ, ì´ˆê³¼ë¶„(1.5ë§Œëª…)ì— ëŒ€í•´ ì¸ë‹¹ -100ì› í• ì¸. ì›”ë§ ê¸°ì¤€ ì›” í‰ê·  ê°€ì…ì ì§‘ê³„ í›„ ìë™ ì ìš©.
              </span>
            </div>

            <div class="form-label">ìš°ì„ ìˆœìœ„ (TBD)</div>
            <div class="form-field-group">
              <input class="field-input w-sm" type="text" placeholder="ì˜ˆ: 1 (ìˆ«ìê°€ ë‚®ì„ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ ë†’ìŒ)" />
              <span class="field-note">
                ë³µìˆ˜ í• ì¸ìš”ì†Œê°€ ë™ì‹œì— ì ìš©ë  ê²½ìš°ì˜ ì²˜ë¦¬ ìš°ì„ ìˆœìœ„ì…ë‹ˆë‹¤. ì‹¤ì œ ì •ì±… í™•ì • í›„ ìƒì„¸ ë¡œì§ì„ ë°˜ì˜í•©ë‹ˆë‹¤.
              </span>
            </div>
            </div>
          </div>

          <div class="btn-group-right">
            <button class="btn-secondary" type="button">ì´ˆê¸°í™”</button>
            <button class="btn-primary" type="button" onclick="alert('í• ì¸ìš”ì†Œ ë“±ë¡ ì˜ˆì‹œì…ë‹ˆë‹¤.')">ë“±ë¡</button>
          </div>
        </section>
      `;
    }

    /* =========================
       ì¡°íšŒ/ë³€ê²½ íƒ­ â€“ í…Œì´ë¸” + ìƒì„¸(5ê°œ ì¼ê´„)
    ========================= */
    /* =========================
       ì¡°íšŒ/ë³€ê²½ íƒ­ â€“ í…Œì´ë¸” + ìƒì„¸(5ê°œ ì¼ê´„)
       (Updated: Filtering Logic)
    ========================= */
    function renderReferenceTable() {
      const tbody = document.getElementById("reference-tbody");
      const filterSelect = document.getElementById("filter-type");

      if (!tbody) return;

      const filterValue = filterSelect ? filterSelect.value : "ALL";

      // Filter items
      const filteredItems = REFERENCE_ITEMS.filter(item => {
        if (filterValue === "ALL") return true;
        return item.type === filterValue;
      });

      // Update Total Count (PRD 3.1.1)
      const countEl = document.getElementById("total-count");
      if (countEl) countEl.textContent = filteredItems.length;

      if (filteredItems.length === 0) {
        tbody.innerHTML = `<tr><td colspan="6" style="text-align:center; padding:20px; color:#999;">ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>`;
        return;
      }

      tbody.innerHTML = filteredItems.map(item => {
        const isProduct = item.type === "ìƒí’ˆ";
        const isDeleted = item.status === "ì‚­ì œ";

        // ìƒí’ˆ ìŠ¤íƒ€ì¼
        let rowStyle = "";
        let typeStyle = "";

        if (isProduct) {
          typeStyle = "font-weight:700; color:var(--brand-main);";
          rowStyle = "background:var(--accent-chip-bg); border-left: 3px solid var(--brand-main);";
        }

        // ì‚­ì œëœ í•­ëª© ìŠ¤íƒ€ì¼ (PRD 3.1.3: ë…¼ë¦¬ì  ì‚­ì œ ì‹œê°í™”)
        if (isDeleted) {
          rowStyle = "opacity: 0.6; background: #f1f5f9; border-left: 3px solid #94a3b8;"; // ìƒí’ˆ ìŠ¤íƒ€ì¼ ë®ì–´ì“¸ ìˆ˜ ìˆìŒ
          if (isProduct) rowStyle = "opacity: 0.6; background: #eff6ff; border-left: 3px solid #94a3b8;"; // ìƒí’ˆì¸ë° ì‚­ì œëœ ê²½ìš° ë°°ê²½ìƒ‰ ìœ ì§€í•˜ë˜ íë¦¬ê²Œ
          typeStyle = "color: #64748b;";
        }

        const nameStyle = isDeleted ? "text-decoration: line-through; color: #64748b;" : (isProduct ? 'font-weight:600;' : '');

        // ìƒíƒœ ë°°ì§€
        const statusBadge = item.status === "ì‚­ì œ"
          ? `<span style="padding:2px 6px; border-radius:4px; background:#fee2e2; color:#dc2626; font-size:11px;">ì‚­ì œ</span>`
          : `<span style="padding:2px 6px; border-radius:4px; background:#dcfce7; color:#166534; font-size:11px;">ë“±ë¡</span>`;

        return `
        <tr data-code="${item.code}" class="${item.code === selectedReferenceCode ? "selected" : ""}" style="${rowStyle}">
          <td style="${typeStyle}">${item.type}</td>
          <td>${item.code}</td>
          <td><span class="name-link" style="${nameStyle}">${item.name}</span></td>
          <td>${item.created}</td>
          <td>${statusBadge}</td>
          <td style="text-align:center;">
            <button class="btn-history" data-code="${item.code}" style="border:1px solid #e2e8f0; background:#fff; border-radius:4px; padding:2px 6px; font-size:11px; cursor:pointer;">ğŸ“‹ ì´ë ¥</button>
          </td>
        </tr>
      `;
      }).join("");
    }

    function buildDetailHTML(item) {
      if (!item) return "<p class='field-note'>ì„ íƒëœ ê¸°ì¤€ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";

      const versionBlock = `
                <!-- Version Control Panel -->
                <div style="
                    display: flex; 
                    flex-direction: row; 
                    align-items: center; 
                    justify-content: space-between; 
                    gap: 20px; 
                    padding: 24px; 
                    background: #f8fafc; 
                    border: 1px solid #e2e8f0; 
                    border-radius: 12px;
                    margin-bottom: 30px;
                    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
                ">
                    <!-- Left: Current Status -->
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="
                            width: 44px; height: 44px; 
                            background: #eff6ff; 
                            border-radius: 8px; 
                            display: flex; align-items: center; justify-content: center;
                            font-size: 20px;
                        ">ğŸ“…</div>
                        <div>
                            <div style="font-size: 13px; color: #64748b; font-weight: 500; margin-bottom: 4px;">í˜„ì¬ ë²„ì „ ìœ íš¨ê¸°ê°„ (Valid Period)</div>
                            <div style="font-size: 16px; font-weight: 700; color: #1e293b; letter-spacing: -0.01em;">
                                ${item.valid_from} ~ ${item.valid_to}
                                <span style="
                                    display: inline-block; 
                                    margin-left: 8px; 
                                    padding: 2px 8px; 
                                    background: #dcfce7; 
                                    color: #166534; 
                                    font-size: 11px; 
                                    border-radius: 999px; 
                                    vertical-align: middle;
                                ">Active</span>
                            </div>
                        </div>
                    </div>

                    <!-- Divider -->
                    <div style="width: 1px; height: 40px; background: #cbd5e1;"></div>

                    <!-- Right: Action Area -->
                    <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                        <div style="flex: 1;">
                            <label for="change-effective-date-${item.code}" style="display: block; font-size: 13px; color: var(--brand-main); font-weight: 600; margin-bottom: 4px;">
                                ì‹ ê·œ ë²„ì „ ì‹œì‘ì¼ (Effective Date)
                            </label>
                            <input type="date" id="change-effective-date-${item.code}" class="field-input w-sm" style="height: 38px; border-color: var(--accent-chip-bg-strong);" />
                        </div>
                        <div style="padding-top: 20px; display: flex; gap: 8px;"> <!-- align with input box -->
                             <button class="btn-primary" type="button" 
                                onclick="handleApplyChange('${item.code}')"
                                style="height: 38px; padding: 0 20px; font-weight: 600; box-shadow: 0 2px 4px rgba(30, 64, 175, 0.3);"
                             >
                                ë³€ê²½ì‚¬í•­ ì €ì¥ (Version Up)
                             </button>
                             <button type="button" 
                                onclick="handleDelete('${item.code}')"
                                style="
                                    height: 38px; 
                                    padding: 0 12px; 
                                    font-weight: 600; 
                                    color: #dc2626; 
                                    background: #fef2f2; 
                                    border: 1px solid #fecaca; 
                                    border-radius: 4px;
                                    cursor: pointer;
                                    display: flex; align-items: center; gap: 4px;
                                "
                                onmouseover="this.style.background='#fee2e2'"
                                onmouseout="this.style.background='#fef2f2'"
                             >
                                <span style="font-size:14px;">ğŸ—‘ï¸</span> ì‚­ì œ
                             </button>
                        </div>
                    </div>
                </div>
            `;

      // Get Form HTML based on type
      let formHtml = "";
      if (item.type === "ìƒí’ˆ") formHtml = getFormProductHTML();
      else if (item.type === "ê¸°ëŠ¥ê·¸ë£¹") formHtml = getFormFeatureGroupHTML();
      else if (item.type === "ê¸°ëŠ¥") formHtml = getFormFeatureHTML();
      else if (item.type === "ê³¼ê¸ˆìš”ì†Œ") formHtml = getFormBillingHTML();
      else if (item.type === "í• ì¸ìš”ì†Œ") formHtml = getFormDiscountHTML();

      return `
               <div class="section-header">
                 <div>
                   <h2 class="section-title">ìƒì„¸ ì •ë³´ Â· ë³€ê²½</h2>
                   <p class="section-desc">
                     ì„ íƒí•œ ê¸°ì¤€ì •ë³´([${item.code}])ì˜ ì†ì„±ì„ í™•ì¸í•˜ê³  ë³€ê²½í•©ë‹ˆë‹¤. 
                     ì•„ë˜ ë“±ë¡ ì–‘ì‹ì„ í†µí•´ ìˆ˜ì •ëœ ë‚´ìš©ì€ 'ë³€ê²½ ì ìš© ê¸°ì¤€ì¼ì'ë¶€í„° ìœ íš¨í•œ ì‹ ê·œ ë²„ì „ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
                   </p>
                 </div>
               </div>
               
               <div class="detail-layout" style="display:block;">
                 <!-- Version & Meta Info -->
                 ${versionBlock}

                 <!-- Embedded Registration Form (The "Continuous Attachment") -->
                 <div class="embedded-form-area" style="position:relative;">
                    <div class="section-divider" style="margin:30px 0 10px; border-top:2px dashed var(--accent-chip-bg-strong);"></div>
                    <div class="type-group-title" style="margin-bottom:15px; color:var(--brand-main-dark);">ê¸°ì¤€ì •ë³´ ë“±ë¡ ìƒì„¸ (${item.type})</div>
                    ${formHtml}
                 </div>
               </div>
            `;
    }

    // [Modified] Render ONLY the selected item (or nothing if none selected)
    function renderReferenceDetailList(targetCode = null) {
      const listContainer = document.getElementById("reference-detail-list");
      if (!listContainer) return;

      if (!targetCode) {
        listContainer.innerHTML = "";
        return;
      }

      const item = REFERENCE_ITEMS.find(i => i.code === targetCode);
      if (!item) return;

      listContainer.innerHTML = `
                <section class="card detail-block" id="detail-${item.code}" style="margin-top:20px;">
                    ${buildDetailHTML(item)}
                </section>
            `;

      // Scroll to the newly opened detail section
      setTimeout(() => {
        listContainer.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 50);
    }

    /* ë³€ê²½ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ */
    function handleApplyChange(code) {
      const inputId = `change-effective-date-${code}`;
      const dateInput = document.getElementById(inputId);
      const d = dateInput ? dateInput.value : "";
      const msgDate = d || "ì„ íƒëœ ê¸°ì¤€ì¼ì";
      alert(
        "[" + code + "] ë³€ê²½ ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n" +
        "ì„ íƒí•˜ì‹  '" + msgDate + "' ë¶€í„° ìœ íš¨í•œ [ìƒˆë¡œìš´ ë²„ì „]ì´ ìƒì„±ë©ë‹ˆë‹¤.\n" +
        "ê¸°ì¡´ ë²„ì „ì€ '" + msgDate + "' ì „ì¼ìê¹Œì§€ë§Œ ìœ íš¨í•˜ë„ë¡ ìë™ìœ¼ë¡œ ë§Œë£Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.\n\n" +
        "(ì´ì „ ë²„ì „ì€ ìë™ìœ¼ë¡œ ë§Œë£Œ ì²˜ë¦¬ë©ë‹ˆë‹¤)"
      );
    }

    /* ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ ë™ì‘ (Mock) */
    function handleDelete(code) {
      if (confirm("[" + code + "] ê¸°ì¤€ì •ë³´ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œ ì‹œ í˜„ì¬ ìœ íš¨í•œ ë²„ì „ì´ ì¦‰ì‹œ 'ë§Œë£Œ(Expiration)' ì²˜ë¦¬ë˜ë©°,\nì‹ ê·œ ê³„ì•½ì—ì„œ ë” ì´ìƒ ì„ íƒí•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.")) {
        alert("[" + code + "] ì‚­ì œ(ë§Œë£Œ) ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    }

    /* =========================
       ìƒí’ˆ ê¸°ì¤€ ì •ë³´ í˜ì´ì§€ ì´ˆê¸°í™”
    ========================= */
    /* =========================
       ìƒí’ˆ ê¸°ì¤€ ì •ë³´ í˜ì´ì§€ ì´ˆê¸°í™”
    ========================= */
    function initProductStandardPage() {
      // [Initial Render] í˜ì´ì§€ ëª¨ë“œ í¼ ë Œë”ë§ (Hidden state but ready)
      renderRegisterForm("register-tab-inner-page");

      // ì¡°íšŒ/ë³€ê²½ íƒ­ í…Œì´ë¸”/ìƒì„¸ ë Œë”ë§
      renderReferenceTable();
      // ì¡°íšŒ/ë³€ê²½ íƒ­ í…Œì´ë¸”/ìƒì„¸ ë Œë”ë§
      renderReferenceTable();
      // View Switching Logic
      const viewList = document.getElementById("view-list");
      const viewRegister = document.getElementById("view-register"); // Page View Container

      // 1. Page View Interaction
      const btnGoRegisterPage = document.getElementById("btn-go-register-page");
      const btnBackListPage = document.getElementById("btn-back-list-page");

      if (btnGoRegisterPage) {
        btnGoRegisterPage.addEventListener("click", () => {
          viewList.classList.remove("active");
          viewRegister.classList.add("active");
          currentRenderTarget = "register-tab-inner-page";
          renderRegisterForm("register-tab-inner-page");
          document.querySelector(".main").scrollTop = 0;
        });
      }

      if (btnBackListPage) {
        btnBackListPage.addEventListener("click", () => {
          viewRegister.classList.remove("active");
          viewList.classList.add("active");
        });
      }

      // 2. Modal View Interaction
      const modalRegister = document.getElementById("modal-register");
      const btnGoRegisterModal = document.getElementById("btn-go-register-modal");
      const btnCloseModal = document.getElementById("btn-close-modal");

      if (btnGoRegisterModal) {
        btnGoRegisterModal.addEventListener("click", () => {
          modalRegister.classList.add("open");
          currentRenderTarget = "register-tab-inner-modal";
          renderRegisterForm("register-tab-inner-modal");
        });
      }

      if (btnCloseModal) {
        btnCloseModal.addEventListener("click", () => {
          modalRegister.classList.remove("open");
        });
      }

      // Close modal when clicking outside
      modalRegister.addEventListener("click", (e) => {
        if (e.target === modalRegister) {
          modalRegister.classList.remove("open");
        }
      });

      // [New] Filter Event Listener
      // [Modified] ë“±ë¡ ëŒ€ìƒ ì¹© (ì„œë¹„ìŠ¤ êµ¬ì„± / ê³¼ê¸ˆÂ·í• ì¸) - Handler Generator
      function setupChipHandlers(serviceGroupId, billingGroupId, targetContainerId) {
        const serviceGroup = document.getElementById(serviceGroupId);
        const billingGroup = document.getElementById(billingGroupId);

        if (serviceGroup) {
          serviceGroup.addEventListener("click", (e) => {
            const chip = e.target.closest(".process-step");
            if (!chip) return;
            const type = chip.getAttribute("data-type");

            // UI Update
            billingGroup.querySelectorAll(".policy-card").forEach(c => c.classList.remove("active"));
            serviceGroup.querySelectorAll(".process-step").forEach(c => c.classList.toggle("active", c === chip));

            currentRegisterType = type;
            renderRegisterForm(targetContainerId);
          });
        }

        if (billingGroup) {
          billingGroup.addEventListener("click", (e) => {
            const chip = e.target.closest(".policy-card");
            if (!chip) return;
            const type = chip.getAttribute("data-type");

            // UI Update
            serviceGroup.querySelectorAll(".process-step").forEach(c => c.classList.remove("active"));
            billingGroup.querySelectorAll(".policy-card").forEach(c => c.classList.toggle("active", c === chip));

            currentRegisterType = type;
            renderRegisterForm(targetContainerId);
          });
        }
      }

      // Setup for Page
      setupChipHandlers("chip-group-service", "chip-group-billing", "register-tab-inner-page");
      // Setup for Modal
      setupChipHandlers("chip-group-service-modal", "chip-group-billing-modal", "register-tab-inner-modal");

      const tbody = document.getElementById("reference-tbody");
      if (tbody) {
        tbody.addEventListener("click", (e) => {
          // ì´ë ¥ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
          const historyBtn = e.target.closest(".btn-history");
          if (historyBtn) {
            e.stopPropagation();
            const code = historyBtn.getAttribute("data-code");
            showHistoryModal(code);
            return;
          }

          const row = e.target.closest("tr[data-code]");
          if (!row) return;
          selectedReferenceCode = row.getAttribute("data-code");
          renderReferenceTable();

          // Render ONLY the selected item
          renderReferenceDetailList(selectedReferenceCode);
        });
      }

      // ì´ë ¥ ëª¨ë‹¬ ë‹«ê¸°
      const closeHistoryBtn = document.getElementById("close-history-modal");
      const historyModal = document.getElementById("history-modal");
      if (closeHistoryBtn && historyModal) {
        closeHistoryBtn.addEventListener("click", () => {
          historyModal.style.display = "none";
        });
        historyModal.addEventListener("click", (e) => {
          if (e.target === historyModal) {
            historyModal.style.display = "none";
          }
        });
      }

      const btnLookup = document.getElementById("btn-lookup");
      if (btnLookup) {
        btnLookup.addEventListener("click", () => {
          const date = document.getElementById("lookup-date").value;
          const displayEl = document.getElementById("snapshot-date-display");
          if (displayEl) displayEl.textContent = date || "ë¯¸ì§€ì •";

          alert(
            (date ? date : "ì„ íƒëœ ê¸°ì¤€ì¼ì") +
            " ê¸°ì¤€ ì¡°íšŒ ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ êµ¬í˜„ ì‹œ í•´ë‹¹ ì¼ì ê¸°ì¤€ ìœ íš¨í•œ ê¸°ì¤€ì •ë³´(ë²„ì „)ë¥¼ í•„í„°ë§í•©ë‹ˆë‹¤."
          );
        });
      }
    }

    // ì´ë ¥ ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜ (PRD 3.3)
    function showHistoryModal(code) {
      const modal = document.getElementById("history-modal");
      const codeEl = document.getElementById("history-modal-code");
      const tbody = document.getElementById("history-tbody");

      if (!modal || !codeEl || !tbody) return;

      const item = REFERENCE_ITEMS.find(i => i.code === code);
      if (!item || !item.history) {
        alert("ì´ë ¥ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }

      codeEl.textContent = code + " (" + item.name + ")";

      tbody.innerHTML = item.history.map(h => {
        const actionColor = h.action === "ìƒì„±" ? "#166534" : h.action === "ì‚­ì œ" ? "#dc2626" : "#1e40af";
        return `
          <tr>
            <td>${h.date}</td>
            <td><span style="color:${actionColor}; font-weight:500;">${h.action}</span></td>
            <td>${h.user}</td>
            <td>${h.desc}</td>
          </tr>
        `;
      }).join("");

      modal.style.display = "flex";
    }

    /* =========================
       ìƒë‹¨ ë„¤ë¹„ / ì‚¬ì´ë“œë°”
    ========================= */
    function setActiveTopNav(topLabel) {
      document.querySelectorAll(".top-nav-item").forEach((item) => {
        const label = item.getAttribute("data-top-label");
        item.classList.toggle("active", label === topLabel);
      });
    }

    function renderSidebar(topLabel, selectedL2, selectedL3) {
      const sidebarTitleEl = document.getElementById("sidebar-title");
      const sidebarMenuEl = document.getElementById("sidebar-menu");

      sidebarTitleEl.textContent = topLabel;
      sidebarMenuEl.innerHTML = "";

      const menus = MENU_STRUCTURE[topLabel] || {};
      Object.keys(menus).forEach((l2Name) => {
        const l3List = menus[l2Name];

        const li = document.createElement("li");
        li.className = "menu-item";
        li.dataset.l2 = l2Name;

        const isActiveL2 = l2Name === selectedL2;
        if (isActiveL2) li.classList.add("active", "open");

        const mainDiv = document.createElement("div");
        mainDiv.className = "menu-main";

        const labelDiv = document.createElement("div");
        labelDiv.className = "menu-label";

        const iconSpan = document.createElement("span");
        iconSpan.className = "menu-icon";
        iconSpan.textContent = "ğŸ“‚";

        const textSpan = document.createElement("span");
        textSpan.textContent = l2Name;

        labelDiv.appendChild(iconSpan);
        labelDiv.appendChild(textSpan);

        const arrowSpan = document.createElement("span");
        arrowSpan.className = "menu-arrow";
        arrowSpan.textContent = "â€º";

        mainDiv.appendChild(labelDiv);
        mainDiv.appendChild(arrowSpan);

        const subUl = document.createElement("ul");
        subUl.className = "submenu-list";

        l3List.forEach((l3Name) => {
          const subLi = document.createElement("li");
          subLi.className = "submenu-item";
          subLi.dataset.l3 = l3Name;
          subLi.textContent = l3Name;

          if (isActiveL2 && l3Name === selectedL3) {
            subLi.classList.add("active");
          }

          subUl.appendChild(subLi);
        });

        li.appendChild(mainDiv);
        li.appendChild(subUl);
        sidebarMenuEl.appendChild(li);
      });
    }

    function routeTo(top, l2, l3) {
      currentTop = top;
      currentL2 = l2;
      currentL3 = l3;

      setActiveTopNav(top);
      renderSidebar(top, l2, l3);
      renderPage(top, l2, l3);
    }

    /* =========================
       ì´ˆê¸°í™”
    ========================= */
    document.addEventListener("DOMContentLoaded", () => {
      // ì´ˆê¸° ì§„ì…: ìƒí’ˆ ìš´ì˜ > ìƒí’ˆ ê´€ë¦¬ > ìƒí’ˆ ê¸°ì¤€ ì •ë³´
      // ì´ í™”ë©´ ì•ˆì—ì„œëŠ” "ê¸°ì¤€ì •ë³´ ì¡°íšŒÂ·ë³€ê²½" íƒ­ì´ ê¸°ë³¸ ACTIVE
      routeTo(currentTop, currentL2, currentL3);

      // ìƒë‹¨ L1 íƒ­ í´ë¦­
      document.querySelectorAll(".top-nav-item").forEach((item) => {
        item.addEventListener("click", () => {
          const topLabel = item.getAttribute("data-top-label");
          const menus = MENU_STRUCTURE[topLabel];
          if (!menus) return;

          const l2Names = Object.keys(menus);
          const firstL2 = l2Names[0];
          const firstL3 = menus[firstL2][0];

          routeTo(topLabel, firstL2, firstL3);
        });
      });

      // ì‚¬ì´ë“œë°” L2/L3 í´ë¦­
      const sidebarMenuEl = document.getElementById("sidebar-menu");
      sidebarMenuEl.addEventListener("click", (e) => {
        const submenuItem = e.target.closest(".submenu-item");
        const menuMain = e.target.closest(".menu-main");

        // L3 í´ë¦­
        if (submenuItem) {
          const l3 = submenuItem.dataset.l3;
          const l2 = submenuItem.closest(".menu-item").dataset.l2;
          routeTo(currentTop, l2, l3);
          return;
        }

        // L2 í—¤ë” í´ë¦­ (ì•„ì½”ë””ì–¸ + ì²« L3ë¡œ ì´ë™)
        if (menuMain) {
          const menuItem = menuMain.closest(".menu-item");
          const l2 = menuItem.dataset.l2;
          const menus = MENU_STRUCTURE[currentTop] || {};
          const l3List = menus[l2] || [];
          const l3 = l3List[0] || "";

          if (menuItem.classList.contains("open") && currentL2 === l2) {
            menuItem.classList.toggle("open");
          } else {
            routeTo(currentTop, l2, l3);
          }
        }
      });
    });
  </script>


</body>

</html>